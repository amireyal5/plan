<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×ª×•×›× ×™×ª ×ª×•×¡×¤×™× ×™×•××™×ª</title>
    
    <link rel="manifest" href="manifest.json">
    
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ××™×¤×•×¡ ×•×’×•×¤× ×™× */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background-color: #f7f7f7;
            color: #2c3e50;
            line-height: 1.6;
        }

        /* ××›×•×œ×” ×¨××©×™×ª */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 15px;
        }

        /* ×›×•×ª×¨×•×ª */
        .header {
            text-align: center;
            padding: 25px 0 15px;
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 20px;
        }

        h1 {
            color: #007bff;
            font-weight: 700;
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        h2 {
            color: #28a745;
            font-size: 1.5em;
            font-weight: 700;
            margin-top: 25px;
            margin-bottom: 15px;
            padding-right: 10px;
            border-right: 4px solid #28a745;
        }

        h3 {
            color: #333;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        /* ×§×˜×¢ ××‘×•× ×•×”×ª×—×œ×” */
        .intro-section {
            background-color: #e8f5e9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .intro-section p {
            margin: 10px 0;
        }

        .intro-section strong {
            color: #007bff;
        }

        /* ××•× ×—×™× ×œ×—×™×¦×™× ×‘×ª×•×š ×”×˜×§×¡×˜ */
        .clickable-term {
            font-weight: bold;
            color: #dc3545;
            text-decoration: underline;
            cursor: pointer;
            white-space: nowrap;
        }

        /* ×™×¢×“×™× */
        .goals-list {
            list-style: none;
            padding: 0;
            display: grid;
            gap: 10px;
        }

        .goals-list li {
            background-color: #ffffff;
            padding: 12px 15px;
            border-radius: 8px;
            border-right: 5px solid #007bff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* ×ª×•×¡×¤×™× (×›×¨×˜×™×¡×™×•×ª) */
        .supplements-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .supplement-card {
            background-color: #ffffff;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            border-right: 5px solid #007bff;
        }

        /* ×¦×‘×¢×™× ×œ×¤×™ ×–××Ÿ */
        .morning-card { border-right-color: #ffc107; }
        .evening-card { border-right-color: #6c757d; }
        .psyllium-card { background-color: #e6f7ff; border-right-color: #007bff; }

        .supplement-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .card-title {
            font-weight: 700;
            color: #0056b3;
            margin-bottom: 8px;
            font-size: 1.15em;
        }

        .card-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95em;
            margin-top: 10px;
        }

        .card-details div {
            flex: 1;
            text-align: right;
        }

        .dose, .time {
            font-weight: 700;
            color: #dc3545;
        }

        /* ×“×’×©×™× ×—×©×•×‘×™× */
        .notes-section {
            background-color: #fff8e1;
            border-left: 5px solid #ff9800;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .note-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ffb74d;
        }

        .note-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .note-item strong {
            display: block;
            font-weight: 700;
            color: #e65100;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        /* --- ×¡×˜×™×™×œ×™× ×’ ×œ××¤×œ×™×§×¦×™×™×ª ×”×ª×–×›×•×¨×•×ª (Reminder App) --- */
        .reminder-app {
            margin-top: 40px;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .reminder-section {
            margin-bottom: 20px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .reminder-section h3 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .reminder-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dotted #e0e0e0;
            font-size: 1em;
        }

        .reminder-item:last-child {
            border-bottom: none;
        }

        .item-details {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item-details span:first-child {
            font-weight: 700;
            color: #6c757d;
        }

        .item-details .time-slot {
            font-weight: 700;
            color: #007bff;
            margin-left: 5px;
            padding-left: 5px;
            border-left: 2px solid #007bff;
        }

        /* ×¦'×§×‘×•×§×¡ ××•×¡×ª×¨ + ×¢×™×¦×•×‘ ××•×ª×× */
        .checkbox-container input[type="checkbox"] {
            display: none;
        }

        .checkbox-container label {
            width: 20px;
            height: 20px;
            border: 2px solid #007bff;
            border-radius: 4px;
            display: inline-block;
            cursor: pointer;
            position: relative;
            transition: background-color 0.2s;
        }

        /* ×¢×™×¦×•×‘ ×¡×™××•×Ÿ V */
        .checkbox-container input[type="checkbox"]:checked + label {
            background-color: #28a745;
            border-color: #28a745;
        }

        .checkbox-container input[type="checkbox"]:checked + label::after {
            content: 'âœ“';
            color: #ffffff;
            font-size: 14px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            line-height: 1;
        }

        /* --- ×¡×˜×™×™×œ×™× ×’ ×¤×•×¤××¤ (Popup) --- */
        .popup {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
        }

        .popup-content {
            background-color: #ffffff;
            margin: 20% auto;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }

        .close-btn {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
            transition: color 0.2s;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }

        #popupTitle {
            font-size: 1.3em;
            color: #007bff;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-bottom: 10px;
            text-align: center;
        }

        #popupText {
            white-space: pre-line;
            font-size: 1em;
            text-align: right;
        }

        /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª - ×›×¨×˜×™×¡×™×•×ª ×‘×˜×•×¨ ××—×“ ×‘××•×‘×™×™×œ */
        @media (min-width: 600px) {
            .supplements-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
    
    <script id="manifest-data" type="application/json">
        {
          "name": "×ª×–×›×•×¨×ª ×ª×•×¡×¤×™× - ××™×ª×Ÿ",
          "short_name": "×ª×•×¡×¤×™×",
          "description": "××¤×œ×™×§×¦×™×™×ª ××¢×§×‘ ××—×¨ ×ª×•×¡×¤×™× ×™×•××™×•××™×™×",
          "start_url": "./",
          "display": "standalone",
          "background_color": "#ffffff",
          "theme_color": "#007bff",
          "icons": [
            {
              "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIuMDc2IiB5MT0iLjAyNyIgeDI9Ijk1NyUiIHkyPSI5NzMlIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMjc3OWZmIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0idXJsKCNhKSIgZD0iTTM1OC43IDQ3LjljMjkuNCAzMC40IDQ1LjIgNzEuNSA0NS4yIDExNS41IDAgNDQtMTUuOCA4NS4xLTQ1LjIgMTE1LjVMMTEyLjcgNjUuOGwxMTUuNCA0NS4zeiIvPjxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik00MjQgMTEwLjNsLTE1LjUgMTUuNUwyOTkgNDQyLjlsMjQgMTIuMWMxMTQuMi00NS4xIDE4MS40LTY5LjEgMTgxLjQtMTYwLjUgMC0yOC41LTMuNy00OC4xLTktNjQuNGwtNTMuMiA1My4yYy0xLjMtLjItMy43LS40LTMuNy0uNHoiLz48cGF0aCBmaWxsPSJ1cmwoI2EpIiIgZD0iTTI1NC4xIDExMS4xYy0xOS4yLS4yLTM4LjEtMS44LTU2LjctNS4xTDQ1MSAxNjhjLTY2LjQgMjYuMi0xMzMuNCA0MC0yMDMgNDAtNjkuOCAwLTEzNy40LTEzLjYtMjAzLjYtNDAuMkwyMDEuOSA5Ni41eiIvPjxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik0xMDIuNSA0NDAuOWMtNTQuMi01NC4yLTg0LjEtMTI2LjItODQuMS0yMDMuMSAwLTM0IDUuNy02OS4xIDE2LjctMTAxLjYuMS0uNC4yLS43LjMtMS4yLS41LS44LTEuMS0xLjYtMS43LTIuNCAzNy4yLTU4LjkgNTcuNy0xMjUuMSA1Ny43LTE5Mi41IDAgNzcuNiAzMC4xIDE0OC41IDg0LjEgMjAyLjUgNTQuNiA1NC42IDEyOS4yIDg0LjYgMjAyLjUgODQuNiA3NyAwIDE0Ny41LTMwLjEgMjAyLjUtODQuMS4yLS4zLjMtLjYuNi0uOXptLTEzNS4zLTE3NC40Yy05LjkgMjcuOC0yMC4xIDQ3LjQtMjcuNyA3Ni43LTcuNyAyOS4zLTEyLjggMzIuNC0xMy44IDM4LjYtLjIgMS4xLS4zIDIuMy0uMyAzLjQgMCAzNy4yIDE0LjUgMTA0LjEgMzkuMyAxNTkuOXptMTk2LjggMTU3LjdMMzE0LjkgMTY3LjJjLTQ4LjYtMTIuNi0xMDIuMS0xOS4yLTE1Ni45LTE5LjItMjguMyAwLTU1LjQgMi4zLTgyLjUgNi42em0tOTEuMSA0MS40Yy02LjcgMy41LTEzLjUgNy4yLTIwLjUgMTEtNC45IDIuNy0xMC41IDUuNi0xNi41IDguNy0xMS43IDYtMjEuMiA1LjUtMjkuNSAzLjItMTcuNS03LjQtMjQuNy02LjMtMzIuMS00LTYxLjQgMTguMS0xMDAuNCAyMC0xMjMuMSAxLjEtMjcuMS0yMi41LTQzLjEtNjcuNi00My4xLTExNi42IDAtMzEuMiA2LjItNTkuOSA3LjYtNjMuMWwuMi0uNWwuNC0xLjFsMTIuMi0xMi4zIDUyLjIgNTEuNWM0IDQtMTEuNCA1NS42LTU1LjkgOTkuOS00LjcgNC43LTE2LjUgMTUuNi0xNy43IDE3em00MjYuNi0xMjMuOWMtLjktLjctMS44LTEuNC0yLjctMi4xLTUuNi0zLjktMTEuMy03LjktMTYuOS0xMi4yLTI2LjMtMjEuMy01MS45LTI5LjEtODcuMS0yNC4yLTUuNCAuNy0xMC44IDEuOC0xNi4zIDMtMTEuMiAyLjQtMjEuOCAzLjktMzIuNSAzLjktMTIuNiAwLTI0LjktMi41LTM3LjEtN3oiLz48L3N2Zz4=',
              "sizes": "512x512",
              "type": "image/svg+xml"
            }
          ]
        }
    </script>
</head>
<body onload="requestNotificationPermission()">

    <div class="header">
        <h1>ğŸ’Š ×ª×•×›× ×™×ª ×©×™×§×•× ×•××™×–×•×Ÿ ××•×ª×××ª ××™×©×™×ª ğŸŒ¿</h1>
        <p style="color: #6c757d; font-size: 1.1em;">×¢×‘×•×¨: **××™×ª×Ÿ**</p>
    </div>

    <div class="container">

        <div class="intro-section">
            <p>×”×ª×•×›× ×™×ª × ×‘× ×ª×” ×‘××™×•×—×“ ×›×“×™ ×œ×ª××•×š ×‘×’×•×£ ×•×‘<span class="clickable-term" onclick="showPopup('××™×–×•×Ÿ ××¢×¨×›×ª ×”×¢×¦×‘×™×', '×”×’×“×¨×”: ×”××˜×¨×” ×”×™× ×œ×”×¢×‘×™×¨ ××ª ×”×’×•×£ ×××¦×‘ \'×”×™×œ×—× ××• ×‘×¨×—\' (×¡×™××¤×ª×˜×™) ×œ××¦×‘ \'×× ×•×—×” ×•×¢×™×›×•×œ\' (×¤××¨××¡×™××¤×ª×˜×™).\n×ª×¤×§×™×“: ×”×•×¨×“×ª ×“×•×¤×§, ×”×¨×¤×™×™×ª ×©×¨×™×¨×™×, ×©×™×¤×•×¨ ×¢×™×›×•×œ ×•×©×™× ×”.')">××™×–×•×Ÿ ××¢×¨×›×ª ×”×¢×¦×‘×™×</span> ×‘×ª×§×•×¤×” ×××ª×’×¨×ª. ×–×”×• ×¤×¨×•×˜×•×§×•×œ ×˜×™×¤×•×œ×™ ×–×× ×™ ×œÖ¾**8â€“12 ×©×‘×•×¢×•×ª**, ×©××˜×¨×ª×• ×œ×¤×¨×§ ×‘×”×“×¨×’×” ××ª ××¢×’×œ ×”×¡×˜×¨×¡ â€“ ×”×—×¨×“×” â€“ ×”×›×•×œ×¡×˜×¨×•×œ.</p>
            <p>**×”×¢×¨×” ×—×©×•×‘×”:** ×”×•×’×“×¨×• ×¢×‘×•×¨×š 8 ×©×¢×•× ×™× ××¢×•×¨×¨×™× ×™×•××™×™× (×‘-06:30, 07:45, 08:00, 10:00, 12:00, 15:00, 19:00, 21:00) ×‘××¤×œ×™×§×¦×™×™×ª ×”×©×¢×•×Ÿ ×©×œ ×”××›×©×™×¨ ×©×œ×š, ××©×¨ ×™×¡×¤×§×• ×”×ª×¨××•×ª ×¨×•×˜×˜×•×ª ×•×§×•×¤×¦×•×ª ××“×•×™×§×•×ª. </p>
        </div>

        <h2>ğŸ¯ ×”×™×¢×“×™× ×”××¨×›×–×™×™×</h2>
        <ul class="goals-list">
            <li><span class="clickable-term" onclick="showPopup('××™×–×•×Ÿ ××¢×¨×›×ª ×”×¢×¦×‘×™×', '×”×’×“×¨×”: ×”××˜×¨×” ×”×™× ×œ×”×¢×‘×™×¨ ××ª ×”×’×•×£ ×××¦×‘ \'×”×™×œ×—× ××• ×‘×¨×—\' (×¡×™××¤×ª×˜×™) ×œ××¦×‘ \'×× ×•×—×” ×•×¢×™×›×•×œ\' (×¤××¨××¡×™××¤×ª×˜×™).\n×ª×¤×§×™×“: ×”×•×¨×“×ª ×“×•×¤×§, ×”×¨×¤×™×™×ª ×©×¨×™×¨×™×, ×©×™×¤×•×¨ ×¢×™×›×•×œ ×•×©×™× ×”.')">××™×–×•×Ÿ ××¢×¨×›×ª ×”×¢×¦×‘×™×</span> ×•×”×¤×—×ª×ª <span class="clickable-term" onclick="showPopup('×§×•×¨×˜×™×–×•×œ', '×”×’×“×¨×”: ×”×•×¨××•×Ÿ ×¡×˜×¨×¡ ×”××©×ª×—×¨×¨ ××‘×œ×•×˜×ª ×”××“×¨× ×œ ×‘×ª×’×•×‘×” ×œ××¦×‘×™ ×œ×—×¥ ××• ×¡×›× ×”.\n×ª×¤×§×™×“: ×¨××•×ª ×’×‘×•×”×•×ª ×›×¨×•× ×™×•×ª ×§×©×•×¨×•×ª ×œ×¢×œ×™×™×” ×‘××©×§×œ, ×‘×¢×™×•×ª ×©×™× ×”, ×“×™×›×•×™ ×—×™×¡×•× ×™ ×•×¢×œ×™×™×” ×‘×¡×™×›×•×Ÿ ×œ××—×œ×•×ª ×œ×‘.')">×§×•×¨×˜×™×–×•×œ</span>.</li>
            <li>×©×™×¤×•×¨ ×¤×¨×•×¤×™×œ ×©×•×× ×™× ×‘×“× â€“ ×™×¨×™×“×” ×‘<span class="clickable-term" onclick="showPopup('LDL', '×”×’×“×¨×”: ×œ×™×¤×•×¤×¨×•×˜××™×Ÿ ×‘×¦×¤×™×¤×•×ª × ××•×›×”, ×”××›×•× ×” \'×”×›×•×œ×¡×˜×¨×•×œ ×”×¨×¢\'.\n×ª×¤×§×™×“: × ×•×©× ×›×•×œ×¡×˜×¨×•×œ ××”×›×‘×“ ×œ×¨×§××•×ª. ×¨××•×ª ×’×‘×•×”×•×ª ××¢×œ×•×ª ××ª ×”×¡×™×›×•×Ÿ ×œ×”×¦×˜×‘×¨×•×ª ×¤×œ××§ ×‘×¢×•×¨×§×™× (×˜×¨×©×ª ×¢×•×¨×§×™×).')">LDL</span> ×•×‘<span class="clickable-term" onclick="showPopup('×˜×¨×™×’×œ×™×¦×¨×™×“×™×', '×”×’×“×¨×”: ×¡×•×’ ×©×•××Ÿ ×”× ××¦× ×‘×“×. ×”×’×•×£ ××™×™×¦×¨ ×˜×¨×™×’×œ×™×¦×¨×™×“×™× ××¢×•×“×¤×™ ×§×œ×•×¨×™×•×ª (×‘×¢×™×§×¨ ××¤×—××™××•×ª ×¤×©×•×˜×•×ª ×•×¡×•×›×¨).\n×ª×¤×§×™×“: ××©××©×™× ×›××§×•×¨ ×× ×¨×’×™×” ×××•×—×¡×Ÿ. ×¨××•×ª ×’×‘×•×”×•×ª ×§×©×•×¨×•×ª ×œ×¡×™×›×•×Ÿ ×œ××—×œ×•×ª ×œ×‘ ×•×¡×•×›×¨×ª.')">×˜×¨×™×’×œ×™×¦×¨×™×“×™×</span>.</li>
            <li>×ª××™×›×” ×‘××¦×‘ ×”×¨×•×— ×•×‘×× ×¨×’×™×” â€“ ×©×™×¤×•×¨ ×™×™×¦×•×¨ ××•×œ×™×›×™× ×¢×¦×‘×™×™× ×—×™×•× ×™×™×, ×›×•×œ×œ ×”×¤×—×ª×ª <span class="clickable-term" onclick="showPopup('×“×œ×§×ª (Inflammation)', '×”×’×“×¨×”: ×ª×’×•×‘×” ×˜×‘×¢×™×ª ×©×œ ××¢×¨×›×ª ×”×—×™×¡×•×Ÿ ×œ×¤×¦×™×¢×” ××• ×–×™×”×•×. ×“×œ×§×ª ×›×¨×•× ×™×ª ×•×©×§×˜×” ×§×©×•×¨×” ×›××¢×˜ ×œ×›×œ ××—×œ×•×ª ×”×œ×‘ ×•×”××˜×‘×•×œ×™×–×, ×›×•×œ×œ ×›×•×œ×¡×˜×¨×•×œ ×’×‘×•×”.\n×ª×¤×§×™×“: ×”×ª×•×¡×¤×™× ×‘×ª×•×›× ×™×ª (×›××• ××•××’×” 3) ×¢×•×–×¨×™× ×œ×”×¤×—×™×ª ×“×œ×§×ª ×›×¨×•× ×™×ª.')">×“×œ×§×ª</span>.</li>
        </ul>

        <h2>â° ×”×œ×•×´×–: ×ª×•×¡×¤×™× ××•×ª×××™× ××™×©×™×ª</h2>

        <h3 style="color: #ff9800;">â˜€ï¸ ×‘×•×§×¨ ×•×¦×”×¨×™×™× (×× ×¨×’×™×” ×•××˜×‘×•×œ×™×–×)</h3>
        <div class="supplements-grid">
            <div class="supplement-card morning-card" onclick="showPopup('L-Tyrosine 500 ××´×’', '×ª×¤×§×™×“ ××¨×›×–×™: ×—×•××¨ ×’×œ× ×œ×™×™×¦×•×¨ **×“×•×¤××™×Ÿ** ×•××“×¨× ×œ×™×Ÿ. × ×•×ª×Ÿ ×× ×¨×’×™×” ×•××§×“× ××•×˜×™×‘×¦×™×”, ×¢×•×–×¨ ×‘××¦×‘×™ ×“×™×›××•×Ÿ.\n**×—×©×•×‘**: ×™×© ×œ×™×˜×•×œ ×¢×œ ×‘×˜×Ÿ ×¨×™×§×”.\n×–××Ÿ: **06:30**, 30 ×“×§×•×ª ××—×¨×™ ×§×™××”, ×œ×¤× ×™ ×”×‘×¨×‘×¨×™×Ÿ.')">
                <div class="card-title">L-Tyrosine</div>
                <p>500 ×"×’</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1 ×›××•×¡×”</div>
                    <div class="time">×–××Ÿ: 06:30, ×¢×œ ×‘×˜×Ÿ ×¨×™×§×”</div>
                </div>
            </div>

            <div class="supplement-card psyllium-card" onclick="showPopup('×¤×¡×™×œ×™×•× - Whole Psyllium Husks', '×ª×¤×§×™×“ ××¨×›×–×™: ×¡×™×‘×™× ×ª×–×•× ×ª×™×™× ××¡×™×¡×™× ×”×ª×•×¨××™× ×œ××™×–×•×Ÿ ×©×•×× ×™× (×œ×›×™×“×ª ×›×•×œ×¡×˜×¨×•×œ ×‘××¢×™) ×•×¡×•×›×¨.\n**××•×¤×Ÿ × ×˜×™×œ×”**: ×œ×¢×¨×‘×‘ ×‘×›×•×¡ ××™× ×’×“×•×œ×” (×œ×¤×—×•×ª 350 ××´×œ) ×•×œ×©×ª×•×ª **××™×“**. **×—×•×‘×” ×œ×©×ª×•×ª ×¢×•×“ ××™× ×œ××—×¨ ××›×Ÿ** ×›×“×™ ×œ×× ×•×¢ ×—×¡×™××”.\n××™× ×•×Ÿ: ×›×¤×™×ª ×©×˜×•×—×” (5 ×’×¨×³).')">
                <div class="card-title">×¤×¡×™×œ×™×•× (×¤×¢× 1 ×-2)</div>
                <p>Whole Psyllium Husks</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 5 ×’×¨×³</div>
                    <div class="time">×–××Ÿ: 10:00, ×‘×™×Ÿ ××¨×•×—×•×ª</div>
                </div>
            </div>
            
            <div class="supplement-card morning-card" onclick="showPopup('×‘×¨×‘×¨×™×Ÿ ××“×•×•× ×¡×“ (California Gold Nutrition)', '×ª×¤×§×™×“ ××¨×›×–×™: ×ª××™×›×” ×‘××™×–×•×Ÿ ×¨××•×ª ×”×¡×•×›×¨ ×‘×“× ×•×¡×™×•×¢ ×‘×”×•×¨×“×ª ×”×›×•×œ×¡×˜×¨×•×œ ×”×¨×¢ (LDL).\n**×—×©×•×‘**: ×™×© ×œ×™×˜×•×œ ×¢×œ ×§×™×‘×” ×™×—×¡×™×ª ×¨×™×§×”.\n×–××Ÿ: **07:45**, 15 ×“×§×³ ×œ×¤× ×™ ××¨×•×—×ª ×”×‘×•×§×¨.')">
                <div class="card-title">×‘×¨×‘×¨×™×Ÿ ××“×•×•× ×¡×“</div>
                <p>California Gold Nutrition</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1 ×›××•×¡×”</div>
                    <div class="time">×–××Ÿ: 07:45, ×œ×¤× ×™ ××¨×•×—×ª ×‘×•×§×¨</div>
                </div>
            </div>
            
            <div class="supplement-card morning-card" onclick="showPopup('×§×•××¤×œ×§×¡ ×•×™×˜××™× ×™ B (Life Extension)', '×ª×¤×§×™×“ ××¨×›×–×™: ×™×™×¦×•×¨ ×× ×¨×’×™×”, ×ª×¤×§×•×“ ××¢×¨×›×ª ×”×¢×¦×‘×™×, ×•×œ×™×¦×™×¨×ª ××•×œ×™×›×™× ×¢×¦×‘×™×™× (×“×•×¤××™×Ÿ/×¡×¨×•×˜×•× ×™×Ÿ).\n**×—×©×•×‘**: ×™×© ×œ×™×˜×•×œ ×¢× ××•×›×œ.\n×–××Ÿ: **08:00**, ×¢× ××¨×•×—×ª ×”×‘×•×§×¨.')">
                <div class="card-title">×§×•××¤×œ×§×¡ ×•×™×˜××™× ×™ B</div>
                <p>Life Extension</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1 ×›××•×¡×”</div>
                    <div class="time">×–××Ÿ: 08:00, ×¢× ××¨×•×—×ª ×‘×•×§×¨</div>
                </div>
            </div>
            <div class="supplement-card morning-card" onclick="showPopup('××•××’×” 3 ××©×•×œ×©×ª ×¢×•×¦××” (Micro Ingredients)', '×ª×¤×§×™×“ ××¨×›×–×™: ×”×•×¨×“×ª ×˜×¨×™×’×œ×™×¦×¨×™×“×™×, × ×•×’×“ ×“×œ×§×ª ×—×–×§, ×ª××™×›×” ×‘×‘×¨×™××•×ª ×”×œ×‘ ×•××¦×‘ ×”×¨×•×—.\n**×—×©×•×‘**: ×™×© ×œ×™×˜×•×œ ×¢× ×”××¨×•×—×” ×”×¢×©×™×¨×” ×‘×™×•×ª×¨ ×‘×©×•××Ÿ.\n×–××Ÿ: **12:00**, ×¢× ××¨×•×—×ª ×¦×”×¨×™×™× (×”××¨×•×—×” ×”×’×“×•×œ×”).')">
                <div class="card-title">××•××’×” 3 ××©×•×œ×©×ª ×¢×•×¦××”</div>
                <p>Micro Ingredients</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 2â€“3 ×›××•×¡×•×ª</div>
                    <div class="time">×–××Ÿ: 12:00, ×¢× ××¨×•×—×ª ×¦×”×¨×™×™×</div>
                </div>
            </div>
            <div class="supplement-card morning-card" onclick="showPopup('××©×•×•×’× ×“×” KSM-66 + L-×ª×™×× ×™×Ÿ (Nature\'s Truth)', '×ª×¤×§×™×“ ××¨×›×–×™: ×¦××— ××“×¤×˜×•×’× ×™ ×”×××–×Ÿ ××ª ×”×•×¨××•×Ÿ ×”×¡×˜×¨×¡ (×§×•×¨×˜×™×–×•×œ), ××¤×—×™×ª ××ª×— ×•×—×¨×“×” ×‘××”×œ×š ×”×™×•×.\n**×”×ª×××”**: ××•××œ×¥ ×œ×™×˜×•×œ ×‘×©×¢×” ×§×‘×•×¢×” ×›×“×™ ×œ×•×•×¡×ª ××ª ×”×§×•×¨×˜×™×–×•×œ.\n×–××Ÿ: **15:00**, ××—×¨ ×”×¦×”×¨×™×™×.')">
                <div class="card-title">××©×•×•×’× ×“×” KSM-66 + L-×ª×™×× ×™×Ÿ</div>
                <p>Nature's Truth</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1 ×›××•×¡×”</div>
                    <div class="time">×–××Ÿ: 15:00, ××—×¨ ×”×¦×”×¨×™×™×</div>
                </div>
            </div>
        </div>

        <h3 style="color: #6c757d;">ğŸŒ™ ×¢×¨×‘ (×”×¨×’×¢×” ×•×©×™× ×”)</h3>
        <div class="supplements-grid">
            <div class="supplement-card psyllium-card" onclick="showPopup('×¤×¡×™×œ×™×•× - Whole Psyllium Husks', '×ª×¤×§×™×“ ××¨×›×–×™: ×¡×™×‘×™× ×ª×–×•× ×ª×™×™× ××¡×™×¡×™× ×”×ª×•×¨××™× ×œ××™×–×•×Ÿ ×©×•×× ×™× (×œ×›×™×“×ª ×›×•×œ×¡×˜×¨×•×œ ×‘××¢×™) ×•×¡×•×›×¨.\n**××•×¤×Ÿ × ×˜×™×œ×”**: ×œ×¢×¨×‘×‘ ×‘×›×•×¡ ××™× ×’×“×•×œ×” (×œ×¤×—×•×ª 350 ××´×œ) ×•×œ×©×ª×•×ª **××™×“**. **×—×•×‘×” ×œ×©×ª×•×ª ×¢×•×“ ××™× ×œ××—×¨ ××›×Ÿ** ×›×“×™ ×œ×× ×•×¢ ×—×¡×™××”.\n××™× ×•×Ÿ: ×›×¤×™×ª ×©×˜×•×—×” (5 ×’×¨×³).')">
                <div class="card-title">×¤×¡×™×œ×™×•× (×¤×¢× 2 ×-2)</div>
                <p>Whole Psyllium Husks</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 5 ×’×¨×³</div>
                    <div class="time">×–××Ÿ: 19:00, ×œ×¤× ×™ ×ª×•×¡×¤×™ ×©×™× ×”</div>
                </div>
            </div>

            <div class="supplement-card evening-card" onclick="showPopup('××’× ×–×™×•× ×’×œ×™×¦×™× ××˜ (NOW Foods)', '×ª×¤×§×™×“ ××¨×›×–×™: ×”×¨×¤×™×™×ª ×©×¨×™×¨×™×, ×”×•×¨×“×ª ×¢×•×¨×¨×•×ª ×¢×¦×‘×™×ª ×•×¡×™×•×¢ ×‘×”×›× ×” ×œ×©×™× ×” ×¢××•×§×”.\n**×”×¢×¨×”**: ×¦×•×¨×ª ×”×’×œ×™×¦×™× ××˜ ×”×™× ×”××•××œ×¦×ª ×‘×™×•×ª×¨ ×œ×”×¨×’×¢×”.\n×–××Ÿ: **21:00**, 90 ×“×§×³ ×œ×¤× ×™ ×”×©×™× ×”.')">
                <div class="card-title">××’× ×–×™×•× ×’×œ×™×¦×™× ××˜</div>
                <p>NOW Foods</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 200 ××´×’</div>
                    <div class="time">×–××Ÿ: 21:00, ×œ×¤× ×™ ×”×©×™× ×”</div>
                </div>
            </div>
            <div class="supplement-card evening-card" onclick="showPopup('×˜××•×¨×™×Ÿ (NOW Foods)', '×ª×¤×§×™×“ ××¨×›×–×™: ×—×•××¦×ª ×××™× ×• ×”××’×‘×™×¨×” ×¤×¢×™×œ×•×ª ×©×œ ×”××•×œ×™×š ×”×¢×¦×‘×™ GABA, ×”××¡×™×™×¢ ×‘×”×¨×’×¢×”, ×”×¤×—×ª×ª ×“××’× ×•×ª ×•×©×™×¤×•×¨ ×”×”×™×¨×“××•×ª.\n**× ×˜×™×œ×”**: ××•××œ×¥ ×œ×§×—×ª ×™×—×“ ×¢× ×”××’× ×–×™×•×.\n×–××Ÿ: **21:00**, ×™×—×“ ×¢× ×”××’× ×–×™×•×.')">
                <div class="card-title">×˜××•×¨×™×Ÿ</div>
                <p>NOW Foods</p>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1,000 ××´×’</div>
                    <div class="time">×–××Ÿ: 21:00, ×™×—×“ ×¢× ×”××’× ×–×™×•×</div>
                </div>
            </div>
        </div>


        <div class="notes-section">
            <h2>â­ ×“×’×©×™× ×—×©×•×‘×™× ×œ×‘×™×¦×•×¢</h2>

            <div class="note-item">
                <strong>×”×œ×™×›×” ×§×œ×” ğŸš¶â€â™‚ï¸</strong>
                <p>â€¢ ×”×§×¤×“ ×¢×œ **10â€“15 ×“×§×•×ª ×‘×™×•× ×‘×—×•×¥** â€“ ×¤×¢×™×œ×•×ª ××ª×•× ×” ×–×• ××¡×¤×™×§×” ×›×“×™ ×œ×”×•×¨×™×“ ××ª ×¨××ª ×§×•×¨×˜×™×–×•×œ ×‘××•×¤×Ÿ ××©××¢×•×ª×™.</p>
                <p>â€¢ ×–××Ÿ ××•××œ×¥: **15:30** (××™×“ ×œ××—×¨ × ×˜×™×œ×ª ×”××©×•×•×’× ×“×”).</p>
            </div>

            <div class="note-item">
                <strong>×”×ª×—×œ×” ×”×“×¨×’×ª×™×ª ğŸ¢</strong>
                <p>â€¢ ×× ×™×© ×¢×•××¡ â€“ ×”×ª×—×œ ×¨×§ ×¢× **××’× ×–×™×•× + ×˜××•×¨×™×Ÿ** ×‘×©×‘×•×¢ ×”×¨××©×•×Ÿ. ×”×•×¡×£ ××ª ×©××¨ ×”×ª×•×¡×¤×™× ×‘×”×“×¨×’×”, ××—×“ ×‘×›×œ ×›××” ×™××™×, ×œ×¤×™ ×”×¡×“×¨.</p>
            </div>
        </div>

        <div class="reminder-app">
            <h2>âœ… ××¢×§×‘ ×™×•××™×•××™: ×”×× ×œ×§×—×ª×™?</h2>
            
            <div class="reminder-section">
                <h3>â˜€ï¸ ×‘×•×§×¨ (06:30â€“10:00)</h3>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">06:30</span><span>L-Tyrosine</span> (×¢×œ ×‘×˜×Ÿ ×¨×™×§×”)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="morning-tyrosine" data-time-slot="morning">
                        <label for="morning-tyrosine"></label>
                    </div>
                </div>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">07:45</span><span>×‘×¨×‘×¨×™×Ÿ</span> (×œ×¤× ×™ ××¨×•×—×ª ×‘×•×§×¨)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="morning-berberine" data-time-slot="morning">
                        <label for="morning-berberine"></label>
                    </div>
                </div>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">08:00</span><span>×§×•××¤×œ×§×¡ ×•×™×˜××™× ×™ B</span> (×¢× ×”××•×›×œ)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="morning-bcomplex" data-time-slot="morning">
                        <label for="morning-bcomplex"></label>
                    </div>
                </div>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">10:00</span><span>×¤×¡×™×œ×™×•×</span> (×¤×¢× 1)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="morning-psyllium" data-time-slot="morning">
                        <label for="morning-psyllium"></label>
                    </div>
                </div>
            </div>

            <div class="reminder-section">
                <h3>×¦×”×¨×™×™× / ××—×¨ ×”×¦×”×¨×™×™× (12:00â€“15:30)</h3>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">12:00</span><span>××•××’×” 3</span> (×¢× ××¨×•×—×ª ×¦×”×¨×™×™×)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="noon-omega" data-time-slot="noon">
                        <label for="noon-omega"></label>
                    </div>
                </div>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">15:00</span><span>××©×•×•×’× ×“×” + L-×ª×™×× ×™×Ÿ</span> (×œ×”×¨×’×¢×”)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="noon-ashwagandha" data-time-slot="noon">
                        <label for="noon-ashwagandha"></label>
                    </div>
                </div>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">15:30</span><span>×”×œ×™×›×” ×§×œ×”</span> (10â€“15 ×“×§×•×ª ×‘×—×•×¥)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="noon-walk" data-time-slot="noon">
                        <label for="noon-walk"></label>
                    </div>
                </div>
            </div>

            <div class="reminder-section" style="border-bottom: none; padding-bottom: 0;">
                <h3>ğŸŒ™ ×¢×¨×‘ (19:00â€“21:00)</h3>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">19:00</span><span>×¤×¡×™×œ×™×•×</span> (×¤×¢× ×©× ×™×™×”)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="evening-psyllium" data-time-slot="evening">
                        <label for="evening-psyllium"></label>
                    </div>
                </div>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">21:00</span><span>××’× ×–×™×•× ×’×œ×™×¦×™× ××˜</span> (×œ×¤× ×™ ×”×©×™× ×”)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="evening-magnesium" data-time-slot="evening">
                        <label for="evening-magnesium"></label>
                    </div>
                </div>
                <div class="reminder-item">
                    <div class="item-details">
                        <span class="time-slot">21:00</span><span>×˜××•×¨×™×Ÿ</span> (×™×—×“ ×¢× ×”××’× ×–×™×•×)
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="evening-taurine" data-time-slot="evening">
                        <label for="evening-taurine"></label>
                    </div>
                </div>
            </div>
            <p style="text-align: center; color: #6c757d; font-size: 0.9em; margin-top: 15px;" id="last-reset-date">
                ×”×¡×™××•× ×™× × ×©××¨×™× ××§×•××™×ª. ××™×¤×•×¡ ×™×ª×‘×¦×¢ ××•×˜×•××˜×™×ª ×‘×™×•× ×”×‘×.
            </p>
        </div>

    </div> <div id="myPopup" class="popup">
        <div class="popup-content">
            <span class="close-btn" onclick="closePopup()">&times;</span>
            <h3 id="popupTitle"></h3>
            <p id="popupText"></p>
        </div>
    </div>

    <script>
        // --- ×§×•×“ Service Worker (×”×¨×©××”) ---
        // ×§×•×“ ×–×” ××—×¨××™ ×¢×œ ×©××™×¨×ª ×”×§×‘×¦×™× ××§×•××™×ª ×•×¢×‘×•×“×” ×‘××¦×‘ Offline
        // ×”×•× ××•×˜××¢ ×™×©×™×¨×•×ª ×‘-index.html ×›×“×™ ×œ×× ×•×¢ ×§×•×‘×¥ × ×•×¡×£
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            const swCode = `
              const CACHE_NAME = 'supplements-cache-v1';
              const urlsToCache = [
                './',
                'index.html' 
              ];
            
              self.addEventListener('install', event => {
                self.skipWaiting();
                event.waitUntil(
                  caches.open(CACHE_NAME)
                    .then(cache => {
                      // ×©×™× ×œ×‘: ×‘-GitHub Pages, ×™×™×ª×›×Ÿ ×©×ª×¦×˜×¨×š ×¨×§ ××ª ×”×©× ×©×œ index.html
                      return cache.addAll(urlsToCache);
                    })
                );
              });
            
              self.addEventListener('fetch', event => {
                event.respondWith(
                  caches.match(event.request)
                    .then(response => {
                      if (response) {
                        return response;
                      }
                      return fetch(event.request);
                    })
                );
              });

              // ×¤×•× ×§×¦×™×” ×©×ª××¤×©×¨ ×”×ª×¨××•×ª ×“×¨×š ×”-Service Worker (×“×¨×•×© ×¢×‘×•×¨ ×”×ª×¨××•×ª ×¨×§×¢)
              self.addEventListener('notificationclick', event => {
                event.notification.close();
                event.waitUntil(
                  clients.matchAll({ type: 'window', includeUncontrolled: true }).then(function(clientList) {
                    for (let i = 0; i < clientList.length; i++) {
                      let client = clientList[i];
                      if ('focus' in client)
                        return client.focus();
                    }
                    if (clients.openWindow)
                      return clients.openWindow('/');
                  })
                );
              });
            `;

            const swBlob = new Blob([swCode], {type: 'application/javascript'});
            const swUrl = URL.createObjectURL(swBlob);

            navigator.serviceWorker.register(swUrl).then(function(registration) {
              console.log('Service Worker registered successfully with scope: ', registration.scope);
            }, function(err) {
              console.log('Service Worker registration failed: ', err);
            });
          });
        }
        
        // --- ×§×•×“ ×œ×•×’×™×§×” ××§×•××™×ª (Popups, Checkbox, PWA Reminders) ---

        const CHECKBOX_KEY = 'dailyCheckboxesState';
        const LAST_RESET_KEY = 'lastResetDate';

        // 1. ×©××™×¨×” ×•×˜×¢×™× ×ª ××¦×‘ ×”×¦'×§×‘×•×§×¡×™×
        function saveState() {
            const state = {};
            document.querySelectorAll('.reminder-item input[type="checkbox"]').forEach(checkbox => {
                state[checkbox.id] = checkbox.checked;
            });
            localStorage.setItem(CHECKBOX_KEY, JSON.stringify(state));
        }

        function loadState() {
            const state = JSON.parse(localStorage.getItem(CHECKBOX_KEY));
            if (state) {
                document.querySelectorAll('.reminder-item input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = state[checkbox.id] || false;
                    checkbox.addEventListener('change', () => {
                        saveState();
                        triggerVibration(); // ×¨×˜×˜ ×§×¦×¨ ×œ××—×¨ ×¡×™××•×Ÿ
                    });
                });
            } else {
                // ×× ××™×Ÿ ××¦×‘ ×©××•×¨, ×¢×“×™×™×Ÿ ×™×© ×œ×”×•×¡×™×£ ×××–×™× ×™×
                document.querySelectorAll('.reminder-item input[type="checkbox"]').forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        saveState();
                        triggerVibration();
                    });
                });
            }
            checkAndResetDaily();
        }

        // 2. ××™×¤×•×¡ ×™×•××™
        function checkAndResetDaily() {
            const today = new Date().toDateString();
            const lastReset = localStorage.getItem(LAST_RESET_KEY);
            const dateDisplay = document.getElementById('last-reset-date');

            if (lastReset !== today) {
                // ××™×¤×•×¡
                document.querySelectorAll('.reminder-item input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                saveState();
                localStorage.setItem(LAST_RESET_KEY, today);
                dateDisplay.innerHTML = `×”×¡×™××•× ×™× ××•×¤×¡×• ××•×˜×•××˜×™×ª ×¢×‘×•×¨ ×™×•× ${today}.`;
            } else {
                 dateDisplay.innerHTML = `×”×¡×™××•× ×™× × ×©××¨×• ×¢×‘×•×¨ ×™×•× ${today}. ××™×¤×•×¡ ×™×ª×‘×¦×¢ ××•×˜×•××˜×™×ª ××—×¨.`;
            }
        }
        
        // 3. ×œ×•×’×™×§×ª Pop-up
        const popup = document.getElementById('myPopup');
        const popupTitle = document.getElementById('popupTitle');
        const popupText = document.getElementById('popupText');

        function showPopup(title, text) {
            popupTitle.textContent = title;
            popupText.textContent = text;
            popup.style.display = 'block';
        }

        function closePopup() {
            popup.style.display = 'none';
        }

        // ×¡×’×™×¨×ª ×”×¤×•×¤××¤ ×‘×œ×—×™×¦×” ××—×•×¥ ×œ×ª×•×›×Ÿ
        window.onclick = function(event) {
            if (event.target == popup) {
                closePopup();
            }
        }
        
        // 4. ×§×•×“ PWA: Notifications ×•-Vibration

        const reminders = [
            { time: "06:30", title: "×–××Ÿ ×ª×•×¡×¤×™×: ×‘×•×§×¨", body: "L-Tyrosine â€“ ×¢×œ ×‘×˜×Ÿ ×¨×™×§×”!" },
            { time: "07:45", title: "×–××Ÿ ×ª×•×¡×¤×™×", body: "×‘×¨×‘×¨×™×Ÿ â€“ ×œ×¤× ×™ ××¨×•×—×ª ×”×‘×•×§×¨." },
            { time: "08:00", title: "×–××Ÿ ×ª×•×¡×¤×™×", body: "×§×•××¤×œ×§×¡ ×•×™×˜××™× ×™ B â€“ ×¢× ××¨×•×—×ª ×”×‘×•×§×¨." },
            { time: "10:00", title: "×–××Ÿ ×¡×™×‘×™×: ×¤×¢× 1", body: "×¤×¡×™×œ×™×•× â€“ ×¢× ×”××•×Ÿ ××™×!" },
            { time: "12:00", timeOffset: 1, title: "×–××Ÿ ×ª×•×¡×¤×™×: ×¦×”×¨×™×™×", body: "××•××’×” 3 â€“ ×¢× ××¨×•×—×ª ×¦×”×¨×™×™× (×”××¨×•×—×” ×”×’×“×•×œ×”)." },
            { time: "15:00", timeOffset: 2, title: "×–××Ÿ ×”×¨×’×¢×”", body: "××©×•×•×’× ×“×” + L-×ª×™×× ×™×Ÿ â€“ ×œ×”×•×¨×“×ª ×§×•×¨×˜×™×–×•×œ." },
            { time: "19:00", timeOffset: 3, title: "×–××Ÿ ×¡×™×‘×™×: ×¤×¢× 2", body: "×¤×¡×™×œ×™×•× â€“ ×¢× ×”××•×Ÿ ××™×!" },
            { time: "21:00", timeOffset: 4, title: "×–××Ÿ ×©×™× ×”", body: "××’× ×–×™×•× ×’×œ×™×¦×™× ××˜ + ×˜××•×¨×™×Ÿ â€“ ×œ×”×™×¨×“××•×ª ×§×œ×”." }
        ];

        // 4×. ×‘×§×©×ª ×”×¨×©××” (× ×§×¨× ×‘-body onload)
        function requestNotificationPermission() {
            if ('Notification' in window && Notification.permission !== 'granted' && Notification.permission !== 'denied') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        console.log('Notification permission granted.');
                    } else {
                        console.log('Notification permission denied.');
                    }
                });
            }
        }

        // 4×‘. ×”×¤×¢×œ×ª ×¨×˜×˜
        function triggerVibration() {
            // ×¨×˜×˜ ××•×¨×›×‘ ×©××“××” ×”×ª×¨××”
            if ('vibrate' in navigator) {
                navigator.vibrate([200, 100, 200]); 
            }
        }

        // 4×’. ×”×¦×’×ª ×”×ª×¨××”
        function showPwaReminder(title, body) {
            if (Notification.permission === 'granted') {
                // ×©×™××•×© ×‘-Service Worker ×œ×”×¦×’×ª ×”×ª×¨××•×ª ×¨×§×¢
                if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
                    navigator.serviceWorker.ready.then(registration => {
                        registration.showNotification(title, {
                            body: body,
                            icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIuMDc2IiB5MT0iLjAyNyIgeDI9Ijk1NyUiIHkyPSI5NzMlIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMjc3OWZmIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0idXJsKCNhKSIgZD0iTTM1OC43IDQ3LjljMjkuNCAzMC40IDQ1LjIgNzEuNSA0NS4yIDExNS41IDAgNDQtMTUuOCA4NS4xLTQ1LjIgMTE1LjVMMTEyLjcgNjUuOGwxMTUuNCA0NS4zeiIvPjxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik00MjQgMTEwLjNsLTE1LjUgMTUuNUwyOTkgNDQyLjlsMjQgMTIuMWMxMTQuMi00NS4xIDE4MS40LTY5LjEgMTgxLjQtMTYwLjUgMC0yOC41LTMuNy00OC4xLTktNjQuNGwtNTMuMiA1My4yYy0xLjMtLjItMy43LS40LTMuNy0uNHoiLz48cGF0aCBmaWxsPSJ1cmwoI2EpIiIgZD0iTTI1NC4xIDExMS4xYy0xOS4yLS4yLTM4LjEtMS44LTU2LjctNS4xTDQ1MSAxNjhjLTY2LjQgMjYuMi0xMzMuNCA0MC0yMDMgNDAtNjkuOCAwLTEzNy40LTEzLjYtMjAzLjYtNDAuMkwyMDEuOSA5Ni41eiIvPjxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik0xMDIuNSA0NDAuOWMtNTQuMi01NC4yLTg0LjEtMTI2LjItODQuMS0yMDMuMSAwLTM0IDUuNy02OS4xIDE2LjctMTAxLjYuMS0uNC4yLS43LjMtMS4yLS41LS44LTEuMS0xLjYtMS43LTIuNCAzNy4yLTU4LjkgNTcuNy0xMjUuMSA1Ny43LTE5Mi41IDAgNzcuNiAzMC4xIDE0OC41IDg0LjEgMjAyLjUgNTQuNiA1NC42IDEyOS4yIDg0LjYgMjAyLjUgODQuNiA3NyAwIDE0Ny41LTMwLjEgMjAyLjUtODQuMS4yLS4zLjMtLjYuNi0uOXptLTEzNS4zLTE3NC40Yy05LjkgMjcuOC0yMC4xIDQ3LjQtMjcuNyA3Ni43LTcuNyAyOS4zLTEyLjggMzIuNC0xMy44IDM4LjYtLjIgMS4xLS4zIDIuMy0uMyAzLjQgMCAzNy4yIDE0LjUgMTA0LjEgMzkuMyAxNTkuOXptMTk2LjggMTU3LjdMMzE0LjkgMTY3LjJjLTQ4LjYtMTIuNi0xMDIuMS0xOS4yLTE1Ni45LTE5LjItMjguMyAwLTU1LjQgMi4zLTgyLjUgNi42em0tOTEuMSA0MS40Yy02LjcgMy41LTEzLjUgNy4yLTIwLjUgMTEtNC45IDIuNy0xMC41IDUuNi0xNi41IDguNy0xMS43IDYtMjEuMiA1LjUtMjkuNSAzLjItMTcuNS03LjQtMjQuNy02LjMtMzIuMS00LTYxLjQgMTguMS0xMDAuNCAyMC0xMjMuMSAxLjEtMjcuMS0yMi41LTQzLjEtNjcuNi00My4xLTExNi42IDAtMzEuMiA2LjItNTkuOSA3LjYtNjMuMWwuMi0uNWwuNC0xLjlsMTIuMi0xMi4zIDUyLjIgNTEuNWM0IDQtMTEuNCA1NS42LTU1LjkgOTkuOS00LjcgNC43LTE2LjUgMTUuNi0xNy43IDE3em00MjYuNi0xMjMuOWMtLjktLjctMS44LTEuNC0yLjctMi4xLTUuNi0zLjktMTEuMy03LjktMTYuOS0xMi4yLTI2LjMtMjEuMy01MS45LTI5LjEtODcuMS0yNC4yLTUuNCAuNy0xMC44IDEuOC0xNi4zIDMtMTEuMiAyLjQtMjEuOCAzLjktMzIuNSAzLjktMTIuNiAwLTI0LjktMi41LTM3LjEtN3oiLz48L3N2Zz4=', // ×¡××œ ××•×‘× ×” ×‘-Base64
                            vibrate: [200, 100, 200]
                        });
                    });
                } else {
                    // fallback ×œ×”×ª×¨××” ×¨×’×™×œ×” ×‘×“×¤×“×¤×Ÿ
                    new Notification(title, { body: body });
                    triggerVibration();
                }
            } 
        }

        // 4×“. ×× ×’× ×•×Ÿ ×ª×–××•×Ÿ ×”-PWA
        // ×”×¢×¨×”: ×ª×–××•×Ÿ ×–×” ×¢×•×‘×“ ×¨×§ ×›××©×¨ ×”×“×¤×“×¤×Ÿ/PWA ×¤×ª×•×— ××• ×¤×•×¢×œ ×‘×¨×§×¢ (×ª×œ×•×™ ×“×¤×“×¤×Ÿ).
        function setupPwaReminders() {
            const interval = 60000; // ×‘×“×™×§×” ×›×œ ×“×§×”
            
            setInterval(() => {
                const now = new Date();
                const currentHour = now.getHours();
                const currentMinute = now.getMinutes();
                const currentTime = `${String(currentHour).padStart(2, '0')}:${String(currentMinute).padStart(2, '0')}`;

                reminders.forEach(reminder => {
                    // ×‘×“×™×§×” ×× ×”×©×¢×” ×”× ×•×›×—×™×ª ×ª×•×××ª ××ª ×–××Ÿ ×”×ª×–×›×•×¨×ª
                    if (reminder.time === currentTime) {
                        showPwaReminder(reminder.title, reminder.body);
                        console.log(`PWA Reminder fired: ${reminder.title}`);
                    }
                });
            }, interval);
        }

        // --- ××ª×—×•×œ ---
        window.addEventListener('load', loadState);
    </script>
</body>
</html>
