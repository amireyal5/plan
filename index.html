<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×ª×•×›× ×™×ª ×ª×•×¡×¤×™× ×™×•××™×ª</title>
    
    <link rel="manifest" href="manifest.json">
    
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ××™×¤×•×¡ ×•×’×•×¤× ×™× */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background-color: #fcfcfc; /* ×¨×§×¢ ×‘×”×™×¨ ×××•×“ */
            color: #333;
            line-height: 1.6;
            direction: rtl; /* ×œ×•×•×“× ×©×›×œ ×”×›×™×•×•× ×™× ×”×›×œ×œ×™×™× ×”× ××™××™×Ÿ ×œ×©×××œ */
        }

        /* ××›×•×œ×” ×¨××©×™×ª */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px 15px;
        }

        /* ×›×•×ª×¨×•×ª ×¨××©×™×•×ª */
        .header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 25px;
            border-bottom: 1px solid #eee;
        }

        h1 {
            color: #17a2b8; /* ×¦×‘×¢ ×›×—×•×œ-×¦×™××Ÿ ×¨×’×•×¢ */
            font-weight: 700;
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        h2 {
            color: #28a745;
            font-size: 1.4em;
            font-weight: 700;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-right: 10px;
            border-right: 3px solid #28a745; /* ×¤×¡ ×§×˜×Ÿ ×•×™×¨×•×§ */
        }

        h3 {
            color: #555;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        /* ×§×˜×¢ ××‘×•× ×•×›×¨×˜×™×¡×™×•×ª */
        .intro-section, .notes-section, .midpoint-check, .supplement-card {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08); /* ×¦×œ ×§×œ ×××•×“ */
        }

        /* ×™×¢×“×™× */
        .goals-list {
            list-style: none;
            padding: 0;
        }

        .goals-list li {
            padding: 8px 0;
            border-bottom: 1px dotted #e0e0e0;
            font-size: 0.95em;
        }

        .goals-list li:last-child {
            border-bottom: none;
        }
        
        /* ××•× ×—×™× ×œ×—×™×¦×™× (×‘×§×˜×¢ ×”××‘×•× ×•×”×™×¢×“×™×) */
        .clickable-term {
            font-weight: bold;
            color: #dc3545; /* ×¦×‘×¢ ××“×•× ×œ×”×“×’×©×” ×©×”××•× ×— ×œ×—×™×¥ */
            cursor: pointer;
            border-bottom: 1px dashed #dc3545;
        }

        /* ×ª×•×¡×¤×™× (×›×¨×˜×™×¡×™×•×ª) */
        .supplements-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .supplement-card {
            border-right: 4px solid #17a2b8; /* ×¦×‘×¢ ×‘×¨×™×¨×ª ××—×“×œ */
            transition: border-right-color 0.3s;
            cursor: pointer; /* ×”×•×¡×¤×ª ×¡××Ÿ ×œ×—×™×¥ */
        }
        
        /* ×¦×‘×¢×™× ×œ×¤×™ ×–××Ÿ */
        .morning-card { border-right-color: #ffc107; } /* ×¦×”×•×‘ ×œ×‘×•×§×¨ */
        .evening-card { border-right-color: #6c757d; } /* ××¤×•×¨ ×œ×¢×¨×‘ */
        .psyllium-card { background-color: #f5faff; border-right-color: #007bff; } /* ×¨×§×¢ ×§×œ ×œ×¤×¡×™×œ×™×•× */
        .other-card { border-right-color: #17a2b8; }

        .card-title {
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .card-details {
            font-size: 0.9em;
            color: #666;
        }

        .dose, .time {
            font-weight: 600;
            color: #dc3545;
        }

        /* --- ×¡×˜×™×™×œ×™× ×’ ×œ××¤×œ×™×§×¦×™×™×ª ×”×ª×–×›×•×¨×•×ª (Reminder App) --- */
        .reminder-app {
            margin-top: 30px;
            padding: 20px;
            background-color: #f7f7f7; /* ×¨×§×¢ ×§×œ ×œ××–×•×¨ ×”× ×™×˜×•×¨ */
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .reminder-section {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .reminder-section h3 {
            color: #17a2b8;
            padding-bottom: 5px;
            margin-bottom: 10px;
            border-bottom: 2px solid #17a2b8;
        }

        /* ×§×•× ×˜×™×™× ×¨ ×›×œ×œ×™ ×œ×©×•×¨×” */
        .reminder-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            font-size: 1em;
            color: #444;
        }

        /* --- ×”×ª×™×§×•×Ÿ ×œ×™×™×©×•×¨ RTL/LTR ×•×œ×¢×™×¦×•×‘ ×§×™×©×•×¨ --- */
        .item-details {
            /* ×©×™× ×•×™: ×©×™××•×© ×‘-flex ×›×“×™ ×œ×™×™×©×¨ ××ª ×”×©×¢×” ×œ×™××™×Ÿ ×•××ª ×©× ×”×ª×•×¡×£ ×œ×©×××œ ×‘×ª×•×š ×”××›×•×œ×” ×”× ×•×ª×¨×ª */
            display: flex; 
            align-items: center;
            /* ×©×™× ×•×™: ×¨×•×•×— ×©×™×“×—×•×£ ××ª ×”×©×¢×” ×›××” ×©×™×•×ª×¨ ×™××™× ×” */
            width: 100%; /* ×©×™××•×© ×‘××§×¡×™××•× ×¨×•×—×‘ ×©×”-space-between ××©××™×¨ */
        }
        
        /* ×¢×™×¦×•×‘ ×©× ×”×ª×•×¡×£ ×›×§×™×©×•×¨ */
        .item-details .supplement-name { 
            font-weight: 700;
            color: #17a2b8; /* ×¦×‘×¢ ×›×—×•×œ */
            cursor: pointer;
            border-bottom: 1px solid #17a2b8; /* ×¤×¡ ×ª×—×ª×•×Ÿ ×©×œ ×§×™×©×•×¨ */
            /* ×©×™× ×•×™: ×©×™××•×© ×‘-margin-right ×›×“×™ ×œ×“×—×•×£ ××ª ×©× ×”×ª×•×¡×£ ×©×××œ×” ×™×•×ª×¨ */
            margin-right: 15px;
        }
        
        .item-details .time-slot {
            font-weight: 700;
            color: #dc3545; /* ×¦×‘×¢ ××“×•× ×œ×–××Ÿ */
            white-space: nowrap; 
            direction: ltr; /* ×œ×•×•×“× ×©×”×©×¢×” ×¢×¦××” ×œ× ××ª×”×¤×›×ª */
            /* ×“×•×—×£ ××ª ×”×©×¢×” ×œ×™××™×Ÿ ×”××›×•×œ×” (×œ×™×“ ×”×¦'×§×‘×•×§×¡) */
            margin-right: auto; /* ×“×•×—×£ ××ª ×”××œ×× ×˜ ×”×‘× (×©× ×”×ª×•×¡×£) ×©×××œ×” */
        }
        /* ---------------------------------- */

        /* ×¢×™×¦×•×‘ ×¦'×§×‘×•×§×¡ ×§×œ×™×œ */
        .checkbox-container input[type="checkbox"] {
            display: none;
        }

        .checkbox-container label {
            width: 20px;
            height: 20px;
            border: 1px solid #007bff;
            border-radius: 3px;
            display: inline-block;
            cursor: pointer;
            position: relative;
            transition: background-color 0.2s;
        }

        .checkbox-container input[type="checkbox"]:checked + label {
            background-color: #28a745;
            border-color: #28a745;
        }

        .checkbox-container input[type="checkbox"]:checked + label::after {
            content: 'âœ“';
            color: #ffffff;
            font-size: 14px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            line-height: 1;
        }
        
        /* --- ×¡×˜×™×™×œ×™× ×’ ×œ× ×™×˜×•×¨ ×”×™×•××™ (Self-Assessment) --- */
        .mood-assessment {
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .rating-scale {
            display: flex;
            justify-content: space-between;
            /* ×”×¡×¨×ª direction: ltr ×××¤×©×¨×ª ×œ-1 ×œ×”×™×•×ª ××™××™×Ÿ (RTL) */
            margin-top: 5px;
        }

        .rating-scale label {
            display: inline-block;
            padding: 5px 8px;
            border: 1px solid #ccc;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            font-size: 0.9em;
        }

        .rating-scale input[type="radio"] {
            display: none;
        }

        .rating-scale input[type="radio"]:checked + label {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
            font-weight: 700;
        }

        .rating-item p {
            font-weight: 600;
            margin-bottom: 5px;
            color: #555;
        }
        
        /* ×›×¤×ª×•×¨×™ ×™×™×¦×•× ×•×©××™×¨×” */
        button {
            width: 100%; 
            padding: 12px; 
            margin-top: 10px; 
            background-color: #17a2b8; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        button:hover {
            background-color: #138499;
        }

        /* --- ×¡×˜×™×™×œ×™× ×’ ×œ×¤×•×¤××¤ --- */
        .popup {
            display: none; /* ××•×¡×ª×¨ ×›×‘×¨×™×¨×ª ××—×“×œ */
            position: fixed; 
            z-index: 100; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.6); /* ×¨×§×¢ ×©×—×•×¨ ×©×§×•×£ */
        }

        .popup-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% ××”×—×œ×§ ×”×¢×œ×™×•×Ÿ ×•××¨×›×•×– */
            padding: 20px;
            border: 1px solid #888;
            width: 90%; 
            max-width: 450px; 
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            position: relative;
            animation-name: animatetop;
            animation-duration: 0.4s
        }

        @keyframes animatetop {
            from {top: -300px; opacity: 0}
            to {top: 0; opacity: 1}
        }

        .close-btn {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }

        #popupTitle {
            color: #17a2b8;
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        #popupText {
            font-size: 1em;
            white-space: pre-wrap; /* ×©×•××¨ ×¢×œ ×™×¨×™×“×ª ×©×•×¨×” */
        }

        /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª */
        @media (min-width: 600px) {
            .supplements-grid {
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            }
        }
    </style>
    
    <script id="manifest-data" type="application/json">
        {
          "name": "×ª×–×›×•×¨×ª ×ª×•×¡×¤×™× - ××™×ª×Ÿ",
          "short_name": "×ª×•×¡×¤×™×",
          "description": "××¤×œ×™×§×¦×™×™×ª ××¢×§×‘ ××—×¨ ×ª×•×¡×¤×™× ×™×•××™×•××™×™×",
          "start_url": "./",
          "display": "standalone",
          "background_color": "#fcfcfc",
          "theme_color": "#17a2b8",
          "icons": [
            {
              "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIuMDc2IiB5MT0iLjAyNyIgeDI9Ijk1NyUiIHkyPSI5NzMlIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMjc3OWZmIi8+PC9kZWZzPjxwYXRo ZmlsbD0idXJsKCNhIiBkPSJNMzU4LjcgNDcuOWMyOS40IDMwLjQgNDUuMiA3MS41IDQ1LjIgMTE1LjUgMCA0NC0xNS44IDg1LjEtNDUuMiAxMTUuNUwxMTIuNyA2NS44bDExNS40IDQ1LjN6Ii8+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTQyNCAxMTAuM2wtMTUuNSAxNS41TDI5OSAzMTkuOWwyNCAxMi4xYzExNC4yLTQ1LjEgMTgxLjQtNjkuMSAxODEuNC0xNjAuNSAwLTI4LjUtMy43LTQ4LjEtOS02NC40bC01My4yIDUzLjJjLTEuMy0uMi0zLjctLjQtMy43LS40eiIvPjxwYXRo ZmlsbD0idXJsKCNhKSIgZD0iTTI1NC4xIDExMS4xYy0xOS4yLS4yLTM4LjEtMS44LTU2LjctNS4xTDQ1MSAxNjhjLTY2LjQgMjYuMi0xMzMuNCA0MC0yMDMgNDAtNjkuOCAwLTEzNy40LTEzLjYtMjAzLjYtNDAuMkwyMDEuOSA5Ni41ezAiLz48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNMTAyLjUgNDQwLjljLTU0LjItNTQuMi04NC4xLTEyNi4yLTg0LjEtMjAzLjEgMC0zNCA1LjctNjkuMSAxNi43LTExLjYtLjEtLjQtLjItLjctLjMtMS4yLS41LS44LTEuMS0xLjYtMS43LTIuNCAzNy4yLTU4LjkgNTcuNy0xMjUuMSA1Ny43LTE5Mi41IDAgNzcuNiAzMC4xIDE0OC41IDg0LjEgMjAyLjUgNTQuNiA1NC42IDEyOS4yIDg0LjYgMjAyLjUgODQuNiA3NyAwIDE0Ny41LTMwLjEgMjAyLjUtODQuMS4yLS4zLjMtLjYuNi0uOTN6bS0xMzUuMy0xNzQuNGMtOS45IDI3LjgtMjAuMSA0Ny40LTI3LjcgNzYuNy03LjcgMjkuMy0xMi44IDMyLjQtMTMuOCAzOC42LS4yIDEuMS0uMyAyLjMtLjMgMy40IDAgMzcuMiAxNC41IDEwNC4xIDM5LjMgMTU5Ljl6bTE5Ni44IDE1Ny43TDMxNC45IDE2Ny4yYy00OC42LTEyLjYtMTAyLjEtMTkuMi0xNTYuOS0xOS4yLTI4LjMgMC01NS40IDIuMy04Mi41IDYuNnptLTkxLjEgNDEuNGMtNi43IDMuNS0xMy41IDcuMi0yMC41IDExLTQuOSAyLjctMTAuNSA1LjYtMTYuNSA4LjctMTEuNyA2LTIxLjIgNS41LTI5LjUgMy4yLTE3LjUtNy40LTI0LjctNi4zLTMyLjEtNC02MS40IDE4LjEtMTAwLjQgMjAtMTIzLjEgMS4xLTI3LjEtMjIuNS00My4xLTY3LjYtNDMuMS0xMTYuNiAwLTMxLjIgNi4yLTU5LjkgNy42LTYzLjFsLjItLjV8LjQtMS45bDEyLjItMTIuMyA1Mi4yIDUxLjVjNCA0LTExLjQgNTUuNi01NS45IDk5LjktNC43IDQuNy0xNi41IDE1LjYtMTcuNyAxN3ptNDI2LjYtMTIzLjljLS45LS43LTEuOC0xLjQtMi43LTIuMS01LjYtMy45LTExLjMtNy45LTE2LjktMTIuMi0yNi4zLTIxLjMtNTEuOS0yOS4xLTg3LjEtMjQuMi01LjQgLjctMTAuOCAxLjgtMTYuMyAzLTMxLjIgMi40LTIxLjggMy45LTMyLjUgMy45LTEyLjYgMC0yNC45LTIuNS0zNy4xLTd6Ii8+PC9zdmc+",
              "sizes": "512x512",
              "type": "image/svg+xml"
            }
          ]
        }
    </script>
</head>
<body onload="requestNotificationPermission()">

    <div class="header">
        <h1>ğŸ’Š ×ª×•×›× ×™×ª ×ª×•×¡×¤×™× ×™×•××™×ª ğŸŒ¿</h1>
        <p style="color: #6c757d; font-size: 1.1em;">×¢×‘×•×¨: **××™×ª×Ÿ**</p>
    </div>

    <div class="container">
        
        <div class="intro-section">
            <p>×”×ª×•×›× ×™×ª × ×‘× ×ª×” ×‘××™×•×—×“ ×›×“×™ ×œ×ª××•×š ×‘<span class="clickable-term" onclick="showPopup('××™×–×•×Ÿ ××¢×¨×›×ª ×”×¢×¦×‘×™×', '×”××˜×¨×” ×”×™× ×œ×”×¢×‘×™×¨ ××ª ×”×’×•×£ ×××¦×‘ \'×”×™×œ×—× ××• ×‘×¨×—\' ×œ××¦×‘ \'×× ×•×—×” ×•×¢×™×›×•×œ\'.')">××™×–×•×Ÿ ××¢×¨×›×ª ×”×¢×¦×‘×™×</span>. ×–×”×• ×¤×¨×•×˜×•×§×•×œ ×˜×™×¤×•×œ×™ ×–×× ×™ ×œÖ¾**8â€“12 ×©×‘×•×¢×•×ª**, ×©××˜×¨×ª×• ×œ×¤×¨×§ ×‘×”×“×¨×’×” ××ª ××¢×’×œ ×”×¡×˜×¨×¡.</p>
            <p>**×ª×–×›×•×¨×ª:** ×”×•×’×“×¨×• 8 ×©×¢×•× ×™× ××¢×•×¨×¨×™× ×™×•××™×™× ×‘××›×©×™×¨ ×©×™×¡×¤×§×• ×”×ª×¨××•×ª ××“×•×™×§×•×ª.</p>
        </div>

        <h2>ğŸ¯ ×”×™×¢×“×™× ×”××¨×›×–×™×™×</h2>
        <ul class="goals-list">
            <li>××™×–×•×Ÿ ××¢×¨×›×ª ×”×¢×¦×‘×™× ×•×”×¤×—×ª×ª <span class="clickable-term" onclick="showPopup('×§×•×¨×˜×™×–×•×œ', '×”×•×¨××•×Ÿ ×¡×˜×¨×¡ ×”××©×ª×—×¨×¨ ×‘×ª×’×•×‘×” ×œ×œ×—×¥. ×¨××•×ª ×’×‘×•×”×•×ª ×›×¨×•× ×™×•×ª ×§×©×•×¨×•×ª ×œ×‘×¢×™×•×ª ×©×™× ×”, ×¢×œ×™×” ×‘××©×§×œ ×•×›×•×œ×¡×˜×¨×•×œ.')">×§×•×¨×˜×™×–×•×œ</span>.</li>
            <li>×©×™×¤×•×¨ ×¤×¨×•×¤×™×œ ×©×•×× ×™× ×‘×“× (×”×•×¨×“×ª <span class="clickable-term" onclick="showPopup('LDL', '×”×›×•×œ×¡×˜×¨×•×œ ×”×¨×¢. ×¨××•×ª ×’×‘×•×”×•×ª ××¢×œ×•×ª ××ª ×”×¡×™×›×•×Ÿ ×œ×”×¦×˜×‘×¨×•×ª ×¤×œ××§ ×‘×¢×•×¨×§×™×.')">LDL</span> ×•<span class="clickable-term" onclick="showPopup('×˜×¨×™×’×œ×™×¦×¨×™×“×™×', '×¡×•×’ ×©×•××Ÿ ×”× ×•×¦×¨ ××¢×•×“×¤×™ ×§×œ×•×¨×™×•×ª. ×¨××•×ª ×’×‘×•×”×•×ª ×§×©×•×¨×•×ª ×œ×¡×™×›×•×Ÿ ×œ××—×œ×•×ª ×œ×‘.')">×˜×¨×™×’×œ×™×¦×¨×™×“×™×</span>).</li>
            <li>×ª××™×›×” ×‘××¦×‘ ×”×¨×•×—, ×©×™×¤×•×¨ ×× ×¨×’×™×” ×•×”×¤×—×ª×ª <span class="clickable-term" onclick="showPopup('×“×œ×§×ª (Inflammation)', '×ª×’×•×‘×” ×˜×‘×¢×™×ª ×©×œ ××¢×¨×›×ª ×”×—×™×¡×•×Ÿ. ×“×œ×§×ª ×›×¨×•× ×™×ª ×§×©×•×¨×” ×œ×¨×•×‘ ××—×œ×•×ª ×”××˜×‘×•×œ×™×–× ×•×”×œ×‘.')">×“×œ×§×ª</span>.</li>
        </ul>

        <h2>â° ×œ×•×— ×–×× ×™× ×™×•××™</h2>

        <h3 style="color: #ff9800;">â˜€ï¸ ×‘×•×§×¨ ×•×¦×”×¨×™×™× (×× ×¨×’×™×” ×•××˜×‘×•×œ×™×–×)</h3>
        <div class="supplements-grid">
            <div class="supplement-card morning-card" onclick="showPopup('×œ-×˜×™×¨×•×–×™×Ÿ 500 ××´×’', '×ª×¤×§×™×“: ×—×•××¨ ×’×œ× ×œ×™×™×¦×•×¨ **×“×•×¤××™×Ÿ** ×•××“×¨× ×œ×™×Ÿ. × ×•×ª×Ÿ ×× ×¨×’×™×” ×•××§×“× ××•×˜×™×‘×¦×™×”.\n**×—×©×•×‘**: ×™×© ×œ×™×˜×•×œ ×¢×œ ×‘×˜×Ÿ ×¨×™×§×”.\n×–××Ÿ: **06:30**.')">
                <div class="card-title">×œ-×˜×™×¨×•×–×™×Ÿ</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1 ×›××•×¡×”</div>
                    <div class="time">×–××Ÿ: 06:30, ×¢×œ ×‘×˜×Ÿ ×¨×™×§×”</div>
                </div>
            </div>

            <div class="supplement-card morning-card" onclick="showPopup('×‘×¨×‘×¨×™×Ÿ ××“×•×•× ×¡×“', '×ª×¤×§×™×“: ××™×–×•×Ÿ ×¡×•×›×¨ ×‘×“× ×•×¡×™×•×¢ ×‘×”×•×¨×“×ª ×›×•×œ×¡×˜×¨×•×œ ×¨×¢ (LDL).\n**×—×©×•×‘**: ×¢×œ ×§×™×‘×” ×™×—×¡×™×ª ×¨×™×§×”.\n×–××Ÿ: **07:45**, 15 ×“×§×³ ×œ×¤× ×™ ××•×›×œ.')">
                <div class="card-title">×‘×¨×‘×¨×™×Ÿ ××“×•×•× ×¡×“</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1 ×›××•×¡×”</div>
                    <div class="time">×–××Ÿ: 07:45, ×œ×¤× ×™ ××¨×•×—×ª ×‘×•×§×¨</div>
                </div>
            </div>
            
            <div class="supplement-card morning-card" onclick="showPopup('×§×•××¤×œ×§×¡ ×•×™×˜××™× ×™ B', '×ª×¤×§×™×“: ×™×™×¦×•×¨ ×× ×¨×’×™×”, ×ª×¤×§×•×“ ××¢×¨×›×ª ×”×¢×¦×‘×™× ×•×œ×™×¦×™×¨×ª ××•×œ×™×›×™× ×¢×¦×‘×™×™×.\n**×—×©×•×‘**: ×™×© ×œ×™×˜×•×œ ×¢× ××•×›×œ.\n×–××Ÿ: **08:00**, ×¢× ××¨×•×—×ª ×”×‘×•×§×¨.')">
                <div class="card-title">×§×•××¤×œ×§×¡ ×•×™×˜××™× ×™ B</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1 ×›××•×¡×”</div>
                    <div class="time">×–××Ÿ: 08:00, ×¢× ××¨×•×—×ª ×‘×•×§×¨</div>
                </div>
            </div>
            
            <div class="supplement-card psyllium-card" onclick="showPopup('×¤×¡×™×œ×™×•× (×¤×¢× 1)', '×ª×¤×§×™×“: ×¡×™×‘×™× ×ª×–×•× ×ª×™×™× ×œ××™×–×•×Ÿ ×©×•×× ×™× (×œ×›×™×“×ª ×›×•×œ×¡×˜×¨×•×œ ×‘××¢×™) ×•×¡×•×›×¨.\n**×—×•×‘×”**: ×œ×¢×¨×‘×‘ ×‘××™× ×•×œ×©×ª×•×ª **××™×“**. ×œ×©×ª×•×ª ×¢×•×“ ××™× ×œ××—×¨ ××›×Ÿ.\n×–××Ÿ: **10:00**, ×‘×™×Ÿ ××¨×•×—×•×ª.')">
                <div class="card-title">×¤×¡×™×œ×™×•× (1/2)</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 5 ×’×¨×³</div>
                    <div class="time">×–××Ÿ: 10:00, ×¢× ××™×</div>
                </div>
            </div>

            <div class="supplement-card morning-card" onclick="showPopup('××•××’×” 3 ××©×•×œ×©×ª ×¢×•×¦××”', '×ª×¤×§×™×“: ×”×•×¨×“×ª ×˜×¨×™×’×œ×™×¦×¨×™×“×™×, × ×•×’×“ ×“×œ×§×ª ×—×–×§, ×ª××™×›×” ×‘×œ×‘ ×•×‘××¦×‘ ×”×¨×•×—.\n**×—×©×•×‘**: ×¢× ×”××¨×•×—×” ×”×¢×©×™×¨×” ×‘×™×•×ª×¨ ×‘×©×•××Ÿ.\n×–××Ÿ: **12:00**, ×¢× ××¨×•×—×ª ×¦×”×¨×™×™×.')">
                <div class="card-title">××•××’×” 3</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 2â€“3 ×›××•×¡×•×ª</div>
                    <div class="time">×–××Ÿ: 12:00, ×¢× ××¨×•×—×ª ×¦×”×¨×™×™×</div>
                </div>
            </div>
            <div class="supplement-card morning-card" onclick="showPopup('××©×•×•×’× ×“×” KSM-66 + L-×ª×™×× ×™×Ÿ', '×ª×¤×§×™×“: ×¦××— ××“×¤×˜×•×’× ×™ ×”×××–×Ÿ ××ª ×”×•×¨××•×Ÿ ×”×¡×˜×¨×¡ (×§×•×¨×˜×™×–×•×œ), ××¤×—×™×ª ××ª×— ×•×—×¨×“×”.\n**×”×ª×××”**: ×‘×©×¢×” ×§×‘×•×¢×”.\n×–××Ÿ: **15:00**, ××—×¨ ×”×¦×”×¨×™×™×.')">
                <div class="card-title">××©×•×•×’× ×“×” + L-×ª×™×× ×™×Ÿ</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1 ×›××•×¡×”</div>
                    <div class="time">×–××Ÿ: 15:00, ××—×¨ ×”×¦×”×¨×™×™×</div>
                </div>
            </div>
        </div>

        <h3 style="color: #6c757d;">ğŸŒ™ ×¢×¨×‘ (×”×¨×’×¢×” ×•×©×™× ×”)</h3>
        <div class="supplements-grid">
            <div class="supplement-card psyllium-card" onclick="showPopup('×¤×¡×™×œ×™×•× (×¤×¢× 2)', '×ª×¤×§×™×“: ×¡×™×‘×™× ×ª×–×•× ×ª×™×™× ×œ××™×–×•×Ÿ ×©×•×× ×™× ×•×¡×•×›×¨.\n**×—×•×‘×”**: ×œ×¢×¨×‘×‘ ×‘××™× ×•×œ×©×ª×•×ª **××™×“**. ×œ×©×ª×•×ª ×¢×•×“ ××™× ×œ××—×¨ ××›×Ÿ.\n×–××Ÿ: **19:00**, ×œ×¤× ×™ ×ª×•×¡×¤×™ ×©×™× ×”.')">
                <div class="card-title">×¤×¡×™×œ×™×•× (2/2)</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 5 ×’×¨×³</div>
                    <div class="time">×–××Ÿ: 19:00, ×¢× ××™×</div>
                </div>
            </div>

            <div class="supplement-card evening-card" onclick="showPopup('××’× ×–×™×•× ×’×œ×™×¦×™× ××˜', '×ª×¤×§×™×“: ×”×¨×¤×™×™×ª ×©×¨×™×¨×™×, ×”×•×¨×“×ª ×¢×•×¨×¨×•×ª ×¢×¦×‘×™×ª ×•×¡×™×•×¢ ×‘×”×›× ×” ×œ×©×™× ×” ×¢××•×§×”.\n**×”×¢×¨×”**: ××•××œ×¥ ×œ×”×¨×’×¢×”.\n×–××Ÿ: **21:00**, ×œ×¤× ×™ ×”×©×™× ×”.')">
                <div class="card-title">××’× ×–×™×•× ×’×œ×™×¦×™× ××˜</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 200 ××´×’</div>
                    <div class="time">×–××Ÿ: 21:00, ×œ×¤× ×™ ×”×©×™× ×”</div>
                </div>
            </div>
            
            <div class="supplement-card evening-card" onclick="showPopup('×˜××•×¨×™×Ÿ', '×ª×¤×§×™×“: ××’×‘×™×¨ ×¤×¢×™×œ×•×ª GABA (××•×œ×™×š ×¢×¦×‘×™ ××¨×’×™×¢), ××¡×™×™×¢ ×‘×”×¤×—×ª×ª ×“××’× ×•×ª ×•×©×™×¤×•×¨ ×”×”×™×¨×“××•×ª.\n**× ×˜×™×œ×”**: ×™×—×“ ×¢× ×”××’× ×–×™×•×.\n×–××Ÿ: **21:00**.')">
                <div class="card-title">×˜××•×¨×™×Ÿ</div>
                <div class="card-details">
                    <div class="dose">××™× ×•×Ÿ: 1,000 ××´×’</div>
                    <div class="time">×–××Ÿ: 21:00, ×¢× ×”××’× ×–×™×•×</div>
                </div>
            </div>
        </div>

        <div class="reminder-app">
            <h2>ğŸ“ ××¢×§×‘ ×™×•××™×•××™</h2>
            
            <div class="reminder-section">
                <h3>ğŸ’Š ×ª×•×¡×¤×™× (×•×™×“×•× ×œ×§×™×—×”)</h3>
                
                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="morning-tyrosine"><label for="morning-tyrosine"></label></div>
                    <div class="item-details">
                        <span class="time-slot">06:30</span>
                        <span class="supplement-name" onclick="showPopup('×œ-×˜×™×¨×•×–×™×Ÿ 500 ××´×’', '×ª×¤×§×™×“: ×—×•××¨ ×’×œ× ×œ×™×™×¦×•×¨ **×“×•×¤××™×Ÿ** ×•××“×¨× ×œ×™×Ÿ. × ×•×ª×Ÿ ×× ×¨×’×™×” ×•××§×“× ××•×˜×™×‘×¦×™×”.\n**×—×©×•×‘**: ×™×© ×œ×™×˜×•×œ ×¢×œ ×‘×˜×Ÿ ×¨×™×§×”.\n×–××Ÿ: **06:30**.')">×œ-×˜×™×¨×•×–×™×Ÿ</span>
                    </div>
                </div>
                
                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="morning-berberine"><label for="morning-berberine"></label></div>
                    <div class="item-details">
                        <span class="time-slot">07:45</span>
                        <span class="supplement-name" onclick="showPopup('×‘×¨×‘×¨×™×Ÿ ××“×•×•× ×¡×“', '×ª×¤×§×™×“: ××™×–×•×Ÿ ×¡×•×›×¨ ×‘×“× ×•×¡×™×•×¢ ×‘×”×•×¨×“×ª ×›×•×œ×¡×˜×¨×•×œ ×¨×¢ (LDL).\n**×—×©×•×‘**: ×¢×œ ×§×™×‘×” ×™×—×¡×™×ª ×¨×™×§×”.\n×–××Ÿ: **07:45**, 15 ×“×§×³ ×œ×¤× ×™ ××•×›×œ.')">×‘×¨×‘×¨×™×Ÿ</span>
                    </div>
                </div>

                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="morning-bcomplex"><label for="morning-bcomplex"></label></div>
                    <div class="item-details">
                        <span class="time-slot">08:00</span>
                        <span class="supplement-name" onclick="showPopup('×§×•××¤×œ×§×¡ ×•×™×˜××™× ×™ B', '×ª×¤×§×™×“: ×™×™×¦×•×¨ ×× ×¨×’×™×”, ×ª×¤×§×•×“ ××¢×¨×›×ª ×”×¢×¦×‘×™× ×•×œ×™×¦×™×¨×ª ××•×œ×™×›×™× ×¢×¦×‘×™×™×.\n**×—×©×•×‘**: ×™×© ×œ×™×˜×•×œ ×¢× ××•×›×œ.\n×–××Ÿ: **08:00**, ×¢× ××¨×•×—×ª ×”×‘×•×§×¨.')">×§×•××¤×œ×§×¡ ×•×™×˜××™× ×™ B</span>
                    </div>
                </div>

                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="morning-psyllium"><label for="morning-psyllium"></label></div>
                    <div class="item-details">
                        <span class="time-slot">10:00</span>
                        <span class="supplement-name" onclick="showPopup('×¤×¡×™×œ×™×•× (×¤×¢× 1)', '×ª×¤×§×™×“: ×¡×™×‘×™× ×ª×–×•× ×ª×™×™× ×œ××™×–×•×Ÿ ×©×•×× ×™× (×œ×›×™×“×ª ×›×•×œ×¡×˜×¨×•×œ ×‘××¢×™) ×•×¡×•×›×¨.\n**×—×•×‘×”**: ×œ×¢×¨×‘×‘ ×‘××™× ×•×œ×©×ª×•×ª **××™×“**. ×œ×©×ª×•×ª ×¢×•×“ ××™× ×œ××—×¨ ××›×Ÿ.\n×–××Ÿ: **10:00**, ×‘×™×Ÿ ××¨×•×—×•×ª.')">×¤×¡×™×œ×™×•× (1)</span>
                    </div>
                </div>

                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="noon-omega"><label for="noon-omega"></label></div>
                    <div class="item-details">
                        <span class="time-slot">12:00</span>
                        <span class="supplement-name" onclick="showPopup('××•××’×” 3 ××©×•×œ×©×ª ×¢×•×¦××”', '×ª×¤×§×™×“: ×”×•×¨×“×ª ×˜×¨×™×’×œ×™×¦×¨×™×“×™×, × ×•×’×“ ×“×œ×§×ª ×—×–×§, ×ª××™×›×” ×‘×œ×‘ ×•×‘××¦×‘ ×”×¨×•×—.\n**×—×©×•×‘**: ×¢× ×”××¨×•×—×” ×”×¢×©×™×¨×” ×‘×™×•×ª×¨ ×‘×©×•××Ÿ.\n×–××Ÿ: **12:00**, ×¢× ××¨×•×—×ª ×¦×”×¨×™×™×.')">××•××’×” 3</span>
                    </div>
                </div>

                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="noon-ashwagandha"><label for="noon-ashwagandha"></label></div>
                    <div class="item-details">
                        <span class="time-slot">15:00</span>
                        <span class="supplement-name" onclick="showPopup('××©×•×•×’× ×“×” KSM-66 + L-×ª×™×× ×™×Ÿ', '×ª×¤×§×™×“: ×¦××— ××“×¤×˜×•×’× ×™ ×”×××–×Ÿ ××ª ×”×•×¨××•×Ÿ ×”×¡×˜×¨×¡ (×§×•×¨×˜×™×–×•×œ), ××¤×—×™×ª ××ª×— ×•×—×¨×“×”.\n**×”×ª×××”**: ×‘×©×¢×” ×§×‘×•×¢×”.\n×–××Ÿ: **15:00**, ××—×¨ ×”×¦×”×¨×™×™×.')">××©×•×•×’× ×“×” + ×œ-×ª×™×× ×™×Ÿ</span>
                    </div>
                </div>

                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="evening-psyllium"><label for="evening-psyllium"></label></div>
                    <div class="item-details">
                        <span class="time-slot">19:00</span>
                        <span class="supplement-name" onclick="showPopup('×¤×¡×™×œ×™×•× (×¤×¢× 2)', '×ª×¤×§×™×“: ×¡×™×‘×™× ×ª×–×•× ×ª×™×™× ×œ××™×–×•×Ÿ ×©×•×× ×™× ×•×¡×•×›×¨.\n**×—×•×‘×”**: ×œ×¢×¨×‘×‘ ×‘××™× ×•×œ×©×ª×•×ª **××™×“**. ×œ×©×ª×•×ª ×¢×•×“ ××™× ×œ××—×¨ ××›×Ÿ.\n×–××Ÿ: **19:00**, ×œ×¤× ×™ ×ª×•×¡×¤×™ ×©×™× ×”.')">×¤×¡×™×œ×™×•× (2)</span>
                    </div>
                </div>

                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="evening-magnesium"><label for="evening-magnesium"></label></div>
                    <div class="item-details">
                        <span class="time-slot">21:00</span>
                        <span class="supplement-name" onclick="showPopup('××’× ×–×™×•× ×’×œ×™×¦×™× ××˜', '×ª×¤×§×™×“: ×”×¨×¤×™×™×ª ×©×¨×™×¨×™×, ×”×•×¨×“×ª ×¢×•×¨×¨×•×ª ×¢×¦×‘×™×ª ×•×¡×™×•×¢ ×‘×”×›× ×” ×œ×©×™× ×” ×¢××•×§×”.\n**×”×¢×¨×”**: ××•××œ×¥ ×œ×”×¨×’×¢×”.\n×–××Ÿ: **21:00**, ×œ×¤× ×™ ×”×©×™× ×”.')">××’× ×–×™×•× ×’×œ×™×¦×™× ××˜</span>
                    </div>
                </div>

                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="evening-taurine"><label for="evening-taurine"></label></div>
                    <div class="item-details">
                        <span class="time-slot">21:00</span>
                        <span class="supplement-name" onclick="showPopup('×˜××•×¨×™×Ÿ', '×ª×¤×§×™×“: ××’×‘×™×¨ ×¤×¢×™×œ×•×ª GABA (××•×œ×™×š ×¢×¦×‘×™ ××¨×’×™×¢), ××¡×™×™×¢ ×‘×”×¤×—×ª×ª ×“××’× ×•×ª ×•×©×™×¤×•×¨ ×”×”×™×¨×“××•×ª.\n**× ×˜×™×œ×”**: ×™×—×“ ×¢× ×”××’× ×–×™×•×.\n×–××Ÿ: **21:00**.')">×˜××•×¨×™×Ÿ</span>
                    </div>
                </div>
                
            </div>
            
            <div class="reminder-section">
                <h3>ğŸƒâ€â™‚ï¸ ××•×¨×— ×—×™×™× ×•××“×“×™×</h3>
                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="lifestyle-diet"><label for="lifestyle-diet"></label></div>
                    <div class="item-details">
                        <span class="time-slot">3 ××¨×•×—×•×ª ×××•×–× ×•×ª</span>
                        <span class="supplement-name">×ª×–×•× ×” ğŸ¥—</span>
                    </div>
                </div>
                
                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="lifestyle-sleep"><label for="lifestyle-sleep"></label></div>
                    <div class="item-details">
                        <span class="time-slot">7+ ×©×¢×•×ª ×©×™× ×”</span>
                        <span class="supplement-name">×©×™× ×” ğŸ›Œ</span>
                    </div>
                </div>
                
                <div class="reminder-item">
                    <div class="checkbox-container"><input type="checkbox" id="lifestyle-walk"><label for="lifestyle-walk"></label></div>
                    <div class="item-details">
                        <span class="time-slot">15 ×“×§×³ ×‘×—×•×¥ (15:30)</span>
                        <span class="supplement-name">×”×œ×™×›×” ğŸš¶â€â™‚ï¸</span>
                    </div>
                </div>
            </div>


            <div class="mood-assessment">
                <h3>ğŸ§  ×™×•××Ÿ ×¨×’×©×•×ª ×™×•××™ (×‘×¡×•×£ ×”×™×•×)</h3>
                <p style="font-size: 0.9em; color: #6c757d; margin-bottom: 10px;">×“×¨×’ ×-1 (×¨×¢ ×××•×“/× ××•×š) ×¢×“ 5 (××¦×•×™×Ÿ/×’×‘×•×”)</p>

                <div class="rating-item">
                    <p>×¨××ª **×× ×¨×’×™×”** ×›×œ×œ×™×ª (1â€“5):</p>
                    <div class="rating-scale rating-scale-5" id="rating-energy">
                        <input type="radio" id="energy1" name="energy" value="1"><label for="energy1">1</label>
                        <input type="radio" id="energy2" name="energy" value="2"><label for="energy2">2</label>
                        <input type="radio" id="energy3" name="energy" value="3"><label for="energy3">3</label>
                        <input type="radio" id="energy4" name="energy" value="4"><label for="energy4">4</label>
                        <input type="radio" id="energy5" name="energy" value="5"><label for="energy5">5</label>
                    </div>
                </div>

                <div class="rating-item">
                    <p>×¨××ª **×—×¨×“×”** (1â€“5):</p>
                    <div class="rating-scale rating-scale-5" id="rating-anxiety">
                        <input type="radio" id="anxiety1" name="anxiety" value="1"><label for="anxiety1">1</label>
                        <input type="radio" id="anxiety2" name="anxiety" value="2"><label for="anxiety2">2</label>
                        <input type="radio" id="anxiety3" name="anxiety" value="3"><label for="anxiety3">3</label>
                        <input type="radio" id="anxiety4" name="anxiety" value="4"><label for="anxiety4">4</label>
                        <input type="radio" id="anxiety5" name="anxiety" value="5"><label for="anxiety5">5</label>
                    </div>
                </div>
                
                <div class="rating-item">
                    <p>**××™×›×•×ª ×©×™× ×”** ×‘×œ×™×œ×” ×”×§×•×“× (1â€“5):</p>
                    <div class="rating-scale rating-scale-5" id="rating-sleep">
                        <input type="radio" id="sleep1" name="sleep" value="1"><label for="sleep1">1</label>
                        <input type="radio" id="sleep2" name="sleep" value="2"><label for="sleep2">2</label>
                        <input type="radio" id="sleep3" name="sleep" value="3"><label for="sleep3">3</label>
                        <input type="radio" id="sleep4" name="sleep" value="4"><label for="sleep4">4</label>
                        <input type="radio" id="sleep5" name="sleep" value="5"><label for="sleep5">5</label>
                    </div>
                </div>

                <div class="rating-item">
                    <p>**××¦×‘ ×¨×•×—** ×›×œ×œ×™ (1â€“5):</p>
                    <div class="rating-scale rating-scale-5" id="rating-mood">
                        <input type="radio" id="mood1" name="mood" value="1"><label for="mood1">1</label>
                        <input type="radio" id="mood2" name="mood" value="2"><label for="mood2">2</label>
                        <input type="radio" id="mood3" name="mood" value="3"><label for="mood3">3</label>
                        <input type="radio" id="mood4" name="mood" value="4"><label for="mood4">4</label>
                        <input type="radio" id="mood5" name="mood" value="5"><label for="mood5">5</label>
                    </div>
                </div>
            </div>
            
            <button onclick="saveAndResetOnly()" style="background-color: #28a745; margin-bottom: 5px;">
                ×©××•×¨ ×™×•××Ÿ ×•××™×¤×•×¡ (×œ×œ× ×”×•×¨×“×ª CSV) ğŸ’¾
            </button>
            <button onclick="exportDailyLog()">
                ×™×™×¦×•× ×›×œ ×”×”×™×¡×˜×•×¨×™×” ×œ×§×•×‘×¥ CSV ×•××¤×¡ âœ…
            </button>

            <p id="submission-status" style="text-align: center; margin-top: 10px; font-weight: bold; color: #dc3545;"></p>
            <p style="text-align: center; color: #6c757d; font-size: 0.9em; margin-top: 15px;" id="last-reset-date">
                ×”×¡×™××•× ×™× × ×©××¨×™× ××§×•××™×ª. ××™×¤×•×¡ ×™×ª×‘×¦×¢ ××•×˜×•××˜×™×ª ×‘×™×•× ×”×‘×.
            </p>
        </div> <div class="notes-section">
            <h2>â­ ×“×’×©×™× ×—×©×•×‘×™× ×œ×‘×™×¦×•×¢</h2>
            <div class="note-item">
                <strong>×”×œ×™×›×” ×§×œ×” ğŸš¶â€â™‚ï¸</strong>
                <p>â€¢ ×”×§×¤×“ ×¢×œ **10â€“15 ×“×§×•×ª ×‘×™×•× ×‘×—×•×¥**. ×–××Ÿ ××•××œ×¥: **15:30** (××™×“ ×œ××—×¨ × ×˜×™×œ×ª ×”××©×•×•×’× ×“×”).</p>
            </div>
            <div class="note-item">
                <strong>×”×ª×—×œ×” ×”×“×¨×’×ª×™×ª ğŸ¢</strong>
                <p>â€¢ ×”×ª×—×œ ×¨×§ ×¢× **××’× ×–×™×•× + ×˜××•×¨×™×Ÿ** ×‘×©×‘×•×¢ ×”×¨××©×•×Ÿ. ×”×•×¡×£ ××ª ×©××¨ ×”×ª×•×¡×¤×™× ×‘×”×“×¨×’×”.</p>
            </div>
        </div>

        <div class="midpoint-check">
            <h2>ğŸš¨ ×‘×“×™×§×ª ×‘×™× ×™×™× (4â€“6 ×©×‘×•×¢×•×ª)</h2>
            <p><strong>××¢×§×‘ ×¨×¤×•××™ ğŸ©¸:</strong> ×™×© ×œ×‘×¦×¢ ×‘×“×™×§×•×ª ×“× ×—×•×–×¨×•×ª (×›×•×œ×¡×˜×¨×•×œ ××œ×, B12) ×œ××—×¨ 4â€“6 ×©×‘×•×¢×•×ª.</p>
        </div>

    </div> <div id="myPopup" class="popup">
        <div class="popup-content">
            <span class="close-btn" onclick="closePopup()">&times;</span>
            <h3 id="popupTitle"></h3>
            <p id="popupText"></p>
        </div>
    </div>

    <script>
        // --- ×§×•×“ Service Worker (×”×¨×©××”) ---
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            const swCode = `
              const CACHE_NAME = 'supplements-cache-v3'; 
              const urlsToCache = [
                './',
                'index.html' 
              ];
            
              self.addEventListener('install', event => {
                self.skipWaiting();
                event.waitUntil(
                  caches.open(CACHE_NAME)
                    .then(cache => {
                      return cache.addAll(urlsToCache);
                    })
                );
              });
            
              self.addEventListener('fetch', event => {
                event.respondWith(
                  caches.match(event.request)
                    .then(response => {
                      if (response) {
                        return response;
                      }
                      return fetch(event.request);
                    })
                );
              });

              self.addEventListener('notificationclick', event => {
                event.notification.close();
                event.waitUntil(
                  clients.matchAll({ type: 'window', includeUncontrolled: true }).then(function(clientList) {
                    for (let i = 0; i < clientList.length; i++) {
                      let client = clientList[i];
                      if ('focus' in client)
                        return client.focus();
                    }
                    if (clients.openWindow)
                      return clients.openWindow('/');
                  })
                );
              });
            `;

            const swBlob = new Blob([swCode], {type: 'application/javascript'});
            const swUrl = URL.createObjectURL(swBlob);

            navigator.serviceWorker.register(swUrl).then(function(registration) {
              console.log('Service Worker registered successfully with scope: ', registration.scope);
            }, function(err) {
              console.log('Service Worker registration failed: ', err);
            });
          });
        }

        // --- ××¤×ª×—×•×ª ×©××™×¨×” ××§×•××™×ª (Local Storage Keys) ---
        const CHECKBOX_KEY = 'dailyCheckboxesState';
        const RATING_KEY = 'dailyRatingState';
        const LAST_RESET_KEY = 'lastResetDate';
        const DAILY_LOG_KEY = 'historicalDailyLog'; 

        // 1. ×©××™×¨×” ×•×˜×¢×™× ×ª ××¦×‘
        function saveState() {
            // ×©××™×¨×ª ×¦'×§×‘×•×§×¡×™×
            const checkboxState = {};
            document.querySelectorAll('.reminder-item input[type="checkbox"]').forEach(checkbox => {
                checkboxState[checkbox.id] = checkbox.checked;
            });
            localStorage.setItem(CHECKBOX_KEY, JSON.stringify(checkboxState));
            
            // ×©××™×¨×ª ×“×™×¨×•×’×™×
            const ratingState = {};
            document.querySelectorAll('.mood-assessment input[type="radio"]:checked').forEach(radio => {
                ratingState[radio.name] = radio.value;
            });
            localStorage.setItem(RATING_KEY, JSON.stringify(ratingState));
        }

        function loadState() {
            // ×˜×¢×™× ×ª ×¦'×§×‘×•×§×¡×™× + ×”×•×¡×¤×ª ×××–×™× ×™×
            const checkboxState = JSON.parse(localStorage.getItem(CHECKBOX_KEY));
            document.querySelectorAll('.reminder-item input[type="checkbox"]').forEach(checkbox => {
                if (checkboxState) {
                    checkbox.checked = checkboxState[checkbox.id] || false;
                }
                checkbox.addEventListener('change', () => {
                    saveState();
                    triggerVibration(); 
                });
            });
            
            // ×˜×¢×™× ×ª ×“×™×¨×•×’×™× + ×”×•×¡×¤×ª ×××–×™× ×™×
            const ratingState = JSON.parse(localStorage.getItem(RATING_KEY));
            document.querySelectorAll('.mood-assessment input[type="radio"]').forEach(radio => {
                if (ratingState && ratingState[radio.name] === radio.value) {
                    radio.checked = true;
                }
                radio.addEventListener('change', saveState);
            });

            checkAndResetDailyLocal();
        }

        // 2. ××™×¤×•×¡ ×™×•××™ ××§×•××™ (××• ×œ××—×¨ ×™×™×¦×•× ××•×¦×œ×—)
        function checkAndResetDailyLocal(forceReset = false) {
            const today = new Date().toDateString();
            const lastReset = localStorage.getItem(LAST_RESET_KEY);
            const dateDisplay = document.getElementById('last-reset-date');

            if (forceReset || lastReset !== today) {
                if (!forceReset && lastReset && lastReset !== today) {
                    // ×× ×™×•× ×—×“×© ×”×ª×—×™×œ ×•×™×© × ×ª×•× ×™× ×œ× ×©××•×¨×™×, ×©××•×¨ ××•×ª× ×œ×¤× ×™ ×”××™×¤×•×¡
                    saveCurrentLogToHistory(lastReset); 
                }
                
                // ××™×¤×•×¡ ×¦'×§×‘×•×§×¡×™×
                document.querySelectorAll('.reminder-item input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                // ××™×¤×•×¡ ×“×™×¨×•×’×™×
                document.querySelectorAll('.mood-assessment input[type="radio"]').forEach(radio => {
                    radio.checked = false;
                });
                
                saveState(); // ×©××™×¨×ª ×”××™×¤×•×¡ ×”××§×•××™
                localStorage.setItem(LAST_RESET_KEY, today);
                dateDisplay.innerHTML = `×”×¡×™××•× ×™× ××•×¤×¡×• ××•×˜×•××˜×™×ª ×¢×‘×•×¨ ×™×•× ${today}.`;
            } else {
                 dateDisplay.innerHTML = `×”×¡×™××•× ×™× × ×©××¨×• ×¢×‘×•×¨ ×™×•× ${today}. ××™×¤×•×¡ ×™×ª×‘×¦×¢ ××•×˜×•××˜×™×ª ××—×¨, ××• ×‘×œ×—×™×¦×ª ×›×¤×ª×•×¨ ×”×©××™×¨×”/×™×™×¦×•×.`;
            }
        }
        
        // --- ×¤×•× ×§×¦×™×•×ª ×œ× ×™×”×•×œ ×”×™×¡×˜×•×¨×™×” ×•×™×™×¦×•× ---
        
        function saveCurrentLogToHistory(logDate) {
            const checkboxState = JSON.parse(localStorage.getItem(CHECKBOX_KEY)) || {};
            const ratingState = JSON.parse(localStorage.getItem(RATING_KEY)) || {};
            
            const currentLog = {
                date: logDate,
                checkboxes: checkboxState,
                ratings: ratingState
            };
            
            let historicalLog = JSON.parse(localStorage.getItem(DAILY_LOG_KEY)) || [];
            
            // ×× ×™×¢×ª ×›×¤×™×œ×•×ª: ×¢×“×›×•×Ÿ ×¨×©×•××” ×§×™×™××ª ×× ×”×ª××¨×™×š ×–×”×”
            const existingIndex = historicalLog.findIndex(log => log.date === logDate);
            if (existingIndex > -1) {
                historicalLog[existingIndex] = currentLog;
            } else {
                historicalLog.push(currentLog);
            }
            
            localStorage.setItem(DAILY_LOG_KEY, JSON.stringify(historicalLog));
        }

        // --- ×¤×•× ×§×¦×™×™×ª ×©××™×¨×” ×•××™×¤×•×¡ ×‘×œ×‘×“ (×”×›×¤×ª×•×¨ ×”×™×¨×•×§) ---
        function saveAndResetOnly() {
            const statusDiv = document.getElementById('submission-status');
            statusDiv.textContent = '×©×•××¨ ×•×××¤×¡...';
            
            // ×©××™×¨×ª ×”× ×ª×•× ×™× ×”× ×•×›×—×™×™× ×œ×”×™×¡×˜×•×¨×™×”
            const todayLog = new Date().toDateString();
            saveCurrentLogToHistory(todayLog); 
            
            // ××—×™×§×ª ×”× ×ª×•× ×™× ×”×™×•××™×•××™×™× ×œ××—×¨ ×”×©××™×¨×”
            localStorage.removeItem(CHECKBOX_KEY);
            localStorage.removeItem(RATING_KEY);

            checkAndResetDailyLocal(true); // ××™×¤×•×¡ ×•×™×–×•××œ×™ ×©×œ ×”×¤×•×¨×
            
            statusDiv.textContent = 'âœ”ï¸ ×”×™×•××Ÿ ×”×™×•××™ × ×©××¨ ×‘×”×™×¡×˜×•×¨×™×” ×•××•×¤×¡ ×‘×”×¦×œ×—×”.';
            
            triggerVibration();
            setTimeout(() => { statusDiv.textContent = ''; }, 5000);
        }

        // --- ×¤×•× ×§×¦×™×™×ª ×”×™×™×¦×•× (×”×›×¤×ª×•×¨ ×”×›×—×•×œ) ---
        function exportDailyLog() {
            const statusDiv = document.getElementById('submission-status');
            statusDiv.textContent = '××™×™×¦×...';
            
            // 1. ×©××™×¨×ª ×”× ×ª×•× ×™× ×”× ×•×›×—×™×™× ×œ×”×™×¡×˜×•×¨×™×” ×œ×¤× ×™ ×”×™×™×¦×•×
            const todayLog = new Date().toDateString();
            saveCurrentLogToHistory(todayLog); 
            
            const historicalLog = JSON.parse(localStorage.getItem(DAILY_LOG_KEY)) || [];

            if (historicalLog.length === 0) {
                statusDiv.textContent = 'âŒ ××™×Ÿ × ×ª×•× ×™× ×œ×™×™×¦×•×.';
                setTimeout(() => { statusDiv.textContent = ''; }, 3000);
                return;
            }

            // 2. ×‘× ×™×™×ª ×”-CSV
            const checkboxIds = Array.from(document.querySelectorAll('.reminder-item input[type="checkbox"]')).map(cb => cb.id);
            const ratingNames = ['energy', 'anxiety', 'sleep', 'mood'];
            const header = ['Date', ...checkboxIds, ...ratingNames].join(',');

            const rows = historicalLog.map(log => {
                const date = log.date;
                const checkboxValues = checkboxIds.map(id => log.checkboxes[id] ? '1' : '0');
                const ratingValues = ratingNames.map(name => log.ratings[name] || '0'); 

                return [date, ...checkboxValues, ...ratingValues].join(',');
            });

            const csvContent = [header, ...rows].join('\n');
            
            // 3. ×”×•×¨×“×ª ×”×§×•×‘×¥
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            
            link.setAttribute("href", url);
            link.setAttribute("download", `DailyLog_Export_${new Date().toISOString().slice(0, 10)}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // 4. ××™×¤×•×¡ ×•×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡
            statusDiv.textContent = 'âœ”ï¸ ×”×™×•××Ÿ ×™×•×¦× ×‘×”×¦×œ×—×” ×œ×§×•×‘×¥ CSV! (×”× ×ª×•× ×™× ×”× ×•×›×—×™×™× ××•×¤×¡×•)';
            
            // ××—×™×§×ª ×”× ×ª×•× ×™× ×”×™×•××™×•××™×™× ×œ××—×¨ ×”×™×™×¦×•× ×”××•×¦×œ×—
            localStorage.removeItem(CHECKBOX_KEY);
            localStorage.removeItem(RATING_KEY);

            checkAndResetDailyLocal(true); 
            
            triggerVibration();
            setTimeout(() => { statusDiv.textContent = ''; }, 5000);
        }

        // --- ×§×•×“ ×œ×•×’×™×§×” ××§×•××™×ª (Popups, PWA Reminders, Vibration) ---
        const popup = document.getElementById('myPopup');
        const popupTitle = document.getElementById('popupTitle');
        const popupText = document.getElementById('popupText');

        function showPopup(title, text) {
            popupTitle.textContent = title;
            popupText.textContent = text;
            popup.style.display = 'block';
        }

        function closePopup() {
            popup.style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target == popup) {
                closePopup();
            }
        }

        function triggerVibration() {
            if ('vibrate' in navigator) {
                navigator.vibrate([200, 100, 200]); 
            }
        }

        function requestNotificationPermission() {
            if ('Notification' in window && Notification.permission !== 'granted' && Notification.permission !== 'denied') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        console.log('Notification permission granted.');
                    } else {
                        console.log('Notification permission denied.');
                    }
                });
            }
        }

        // --- ××ª×—×•×œ ---
        window.addEventListener('load', loadState);

    </script>
</body>
</html>
